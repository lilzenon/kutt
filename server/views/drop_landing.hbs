<!DOCTYPE html>
<html lang="en">
<head>
    <title>{{drop.title}} - BOUNCE2BOUNCE</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="{{drop.description}}">
    <meta name="keywords" content="music, artist, drop, signup, {{drop.title}}">
    <meta name="author" content="BOUNCE2BOUNCE">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="{{drop.title}} - BOUNCE2BOUNCE">
    <meta property="og:description" content="{{drop.description}}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://{{default_domain}}/drop/{{drop.slug}}">
    {{#if drop.cover_image}}
    <meta property="og:image" content="{{drop.cover_image}}">
    {{/if}}
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{drop.title}} - BOUNCE2BOUNCE">
    <meta name="twitter:description" content="{{drop.description}}">
    {{#if drop.cover_image}}
    <meta name="twitter:image" content="{{drop.cover_image}}">
    {{/if}}

    <!-- HTML GlobalBank Template Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com"/>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&amp;display=swap" rel="stylesheet"/>
    <link href="https://api.fontshare.com/v2/css?f[]=clash-grotesk@400,300,500&amp;display=swap" rel="stylesheet"/>
    
    <!-- HTML GlobalBank Template CSS -->
    <link rel="stylesheet" href="/css/globalbank-authentic.css"/>

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"/>

    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Laylo-Inspired Design CSS -->
    <style>
        :root {
            --drop-title-color: {{drop.title_color}};
            --drop-description-color: {{drop.description_color}};
            --drop-button-color: {{drop.button_color}};
            --drop-button-text-color: {{drop.button_text_color}};
            --drop-background-color: {{drop.background_color}};

            /* Laylo Design System - Exact Colors */
            --laylo-red: #ff0003;
            --laylo-dark: #1F2937;
            --laylo-card-bg: #1a1a1a;
            --laylo-text-primary: #FFFFFF;
            --laylo-text-secondary: #687178;
            --laylo-border-radius: 24px;
            --laylo-button-red: #ff0003;
            --laylo-input-bg: #374151;
            --laylo-input-focus: #4B5563;
        }

        /* Reset and Base Styles */
        * {
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            min-height: 100vh;
            font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            overscroll-behavior: none;
            background: transparent !important;
            overflow-x: hidden;
        }

        /* Enhanced Background System - Fixed for Industry-Leading Quality */
        .drop-page-container {
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: clamp(16px, 12vh, 120px) clamp(16px, 12vw, 185.5px) 24px;
            min-height: 100vh;
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
            {{#if (eq drop.background_type "solid")}}
            background: {{#if drop.background_color}}{{drop.background_color}}{{else}}var(--laylo-red){{/if}};
            {{else}}
            background: linear-gradient(
                179deg,
                {{#if drop.background_color}}{{drop.background_color}}{{else}}var(--laylo-red){{/if}} 0%,
                {{#if drop.background_color}}{{drop.background_color}}CC{{else}}#DC2626CC{{/if}} 30%,
                {{#if drop.background_color}}{{drop.background_color}}80{{else}}#DC262680{{/if}} 60%,
                rgba(0, 0, 0, 0.9) 100%
            );
            {{/if}}
            background-attachment: fixed;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center center;
        }

        .drop-container {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: clamp(24px, 5vw, 48px);
            width: 100%;
            max-width: 1400px;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        /* Image Container - Industry-Leading Responsive Design */
        .drop-image-container {
            position: relative;
            width: 100%;
            max-width: min(690px, 58.3333vw);
            height: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            background: transparent;
            grid-column: 1;
        }

        .drop-image-container img {
            width: 100%;
            height: auto;
            max-width: 100%;
            border-radius: 12px;
            object-fit: cover;
            background: transparent;
            opacity: 0;
            animation: bloom 0.3s cubic-bezier(0.2, 0.2, 0.25, 1) normal forwards;
            animation-delay: 0.15s;
            display: block;
        }

        @keyframes bloom {
            0% {
                opacity: 0;
                filter: blur(2rem);
                transform: perspective(10rem) translateZ(-2rem);
            }
            100% {
                opacity: 1;
                filter: blur(0);
                transform: perspective(10rem) translateZ(0);
            }
        }

        /* RSVP Container - Industry-Leading Responsive Design */
        .rsvp-container {
            width: 100%;
            max-width: min(398px, 100%);
            padding-bottom: 48px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            background: transparent;
            grid-column: 2;
        }

        /* Title - Enhanced with Dynamic Colors and Proper Alignment */
        .drop-title {
            font-size: 64px;
            line-height: 1.1;
            letter-spacing: 0px;
            text-align: left;
            margin: 0 0 16px 0;
            font-weight: 800;
            text-size-adjust: 100%;
            text-wrap: wrap;
            white-space-collapse: preserve-breaks;
            color: {{#if drop.title_color}}{{drop.title_color}}{{else}}var(--laylo-text-primary){{/if}};
        }

        /* User Container - Proper Alignment */
        .user-container {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            margin-bottom: 24px;
            text-align: left;
        }

        .avatar {
            height: 24px;
            width: 24px;
            border-radius: 50%;
            margin-left: 4px;
        }

        .avatar div {
            background-size: cover;
            background-position: center center;
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .username {
            font-size: 14px;
            font-weight: bold;
            line-height: 21px;
            color: {{#if drop.description_color}}{{drop.description_color}}{{else}}var(--laylo-text-primary){{/if}};
        }

        .username:hover {
            color: var(--laylo-text-secondary) !important;
        }

        /* RSVP Card Container - Exact Laylo Style */
        .rsvp-card-container {
            margin-top: 32px;
            min-width: 349px;
            max-width: 349px;
            position: sticky;
            bottom: -184px;
        }

        /* Enhanced RSVP Card System */
        .laylo-rsvp-card {
            {{#if (eq drop.card_background_type "solid_white")}}
            background-color: #ffffff;
            color: #000000;
            {{else if (eq drop.card_background_type "solid_dark")}}
            background-color: #1a1a1a;
            color: #ffffff;
            {{else if (eq drop.card_background_type "translucent_light")}}
            background-color: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            backdrop-filter: blur(10px);
            {{else if (eq drop.card_background_type "translucent_dark")}}
            background-color: rgba(0, 0, 0, 0.7);
            color: #ffffff;
            backdrop-filter: blur(10px);
            {{else}}
            background-color: var(--laylo-card-bg);
            color: #ffffff;
            {{/if}}
            transition: box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 24px;
            height: 100%;
        }

        /* Card Title - Adaptive Color */
        .laylo-card-title {
            font-family: "Inter", sans-serif;
            font-weight: 400;
            font-size: 1rem;
            line-height: 1.5;
            letter-spacing: 0.00938em;
            {{#if (eq drop.card_background_type "solid_white")}}
            color: #000000;
            {{else}}
            color: #ffffff;
            {{/if}}
            margin: 0 0 12.5px 0;
            text-align: center;
        }

        /* Phone Input Container - Standardized Dimensions */
        .phone-input-container {
            display: flex;
            align-items: center;
            background-color: var(--laylo-input-bg);
            border-radius: 50px;
            padding: 12px 16px;
            margin-bottom: 16px;
            position: relative;
            height: 56px;
            width: 100%;
            box-sizing: border-box;
            transition: background-color 0.3s ease;
        }

        .phone-input-container:focus-within {
            background-color: var(--laylo-input-focus);
        }

        /* Phone input validation states */
        .phone-input-container {
            border: 1px solid transparent;
            transition: all 0.3s ease;
        }

        .phone-input-container.valid {
            border-color: #10B981;
            box-shadow: 0 0 0 1px #10B981;
        }

        .phone-input-container.invalid {
            border-color: #EF4444;
            box-shadow: 0 0 0 1px #EF4444;
        }

        /* Email Input Container - Identical to Phone Input Design */
        .email-input-container {
            display: flex;
            align-items: center;
            background-color: var(--laylo-input-bg);
            border-radius: 50px;
            padding: 12px 16px;
            margin-bottom: 16px;
            position: relative;
            height: 56px;
            width: 100%;
            box-sizing: border-box;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            /* Remove any unwanted glow or border artifacts */
            box-shadow: none;
            outline: none;
        }

        .email-input-container:focus-within {
            background-color: var(--laylo-input-focus);
            box-shadow: none;
        }

        .email-input-container.valid {
            border-color: #10B981;
            box-shadow: 0 0 0 1px #10B981;
        }

        .email-input-container.invalid {
            border-color: #EF4444;
            box-shadow: 0 0 0 1px #EF4444;
        }

        /* Email Input Field - Force Identical Styling to Phone Field */
        .email-input-field {
            flex: 1;
            width: 100%;
            background-color: transparent !important;
            background: transparent !important;
            border: none !important;
            outline: none !important;
            color: white !important;
            font-family: "Inter", sans-serif;
            font-weight: 400;
            font-size: 1rem;
            line-height: 1.5;
            letter-spacing: 0.00938em;
            height: 100%;
            box-sizing: border-box;
            /* Force remove any browser defaults */
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            box-shadow: none !important;
        }

        .email-input-field::placeholder {
            color: rgba(255, 255, 255, 0.7) !important;
            opacity: 1 !important;
        }

        .email-input-field:focus {
            outline: none !important;
            background-color: transparent !important;
            background: transparent !important;
            box-shadow: none !important;
        }

        .email-input-field:active {
            background-color: transparent !important;
            background: transparent !important;
        }

        /* Force email container to match phone container exactly */
        .email-input-container {
            background-color: var(--laylo-input-bg) !important;
            background: var(--laylo-input-bg) !important;
        }

        /* Functional Country Select */
        .phone-country-select {
            position: relative;
            align-self: stretch;
            display: flex;
            align-items: center;
            margin-right: 0.5em;
            flex-shrink: 0;
        }

        .phone-country-flag {
            width: auto;
            height: 18px;
            border-radius: 2px;
            overflow: visible;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            cursor: pointer;
            padding: 2px 4px;
            transition: background-color 0.2s ease;
        }

        .phone-country-flag:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .phone-country-flag img {
            width: 21px;
            height: 15px;
            object-fit: cover;
            border-radius: 2px;
        }

        .country-code {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.875rem;
            font-weight: 500;
            margin-left: 2px;
        }

        .dropdown-arrow {
            margin-left: 2px;
            transition: transform 0.2s ease;
        }

        .phone-country-select.open .dropdown-arrow {
            transform: rotate(180deg);
        }

        /* Country Dropdown - Optimized Sizing */
        .country-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 280px;
            width: max-content;
            max-width: 320px;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            max-height: 180px;
            overflow-y: auto;
            z-index: 1000;
            margin-top: 4px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .country-search {
            padding: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .country-search input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            padding: 6px 8px;
            color: white;
            font-size: 0.875rem;
            outline: none;
        }

        .country-search input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .country-list {
            max-height: 140px;
            overflow-y: auto;
            padding: 4px 0;
        }

        .country-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            white-space: nowrap;
            min-height: 36px;
        }

        .country-option:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .country-option img {
            width: 21px;
            height: 15px;
            object-fit: cover;
            border-radius: 2px;
        }

        .country-option span {
            color: white;
            font-size: 0.875rem;
        }

        /* Phone Input Field - Standardized */
        .phone-input-field {
            flex: 1;
            min-width: 0;
            background-color: transparent;
            border: none;
            outline: none;
            color: white;
            font-family: "Inter", sans-serif;
            font-weight: 400;
            font-size: 1rem;
            line-height: 1.5;
            letter-spacing: 0.00938em;
            padding: 0 90px 0 0;
            height: 100%;
            box-sizing: border-box;
        }

        .phone-input-field::placeholder {
            color: rgba(255, 255, 255, 0.7);
            opacity: 1;
        }

        .phone-input-field:focus {
            outline: none;
        }

        /* Form Stability Enhancements */
        .laylo-rsvp-card form {
            position: relative;
            width: 100%;
        }

        .phone-input-container * {
            box-sizing: border-box;
        }

        /* Prevent layout shifts */
        .laylo-message {
            min-height: 20px;
            transition: all 0.3s ease;
        }

        .laylo-message.hidden {
            min-height: 0;
            padding: 0;
            margin: 0;
            overflow: hidden;
        }

        /* RSVP Submit Button - Properly Inlaid */
        .laylo-rsvp-button {
            position: absolute;
            right: 6px;
            top: 50%;
            transform: translateY(-50%);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            background-color: {{#if drop.button_color}}{{drop.button_color}}{{else}}var(--laylo-button-red){{/if}} !important;
            background: {{#if drop.button_color}}{{drop.button_color}}{{else}}var(--laylo-button-red){{/if}} !important;
            /* Debug: Button color value = {{drop.button_color}} */
            outline: 0;
            border: 0;
            margin: 0;
            padding: 10px 20px;
            cursor: pointer;
            user-select: none;
            vertical-align: middle;
            appearance: none;
            text-decoration: none;
            font-family: "Inter", sans-serif;
            font-weight: 500;
            font-size: 0.875rem;
            line-height: 1.2;
            letter-spacing: 0.02857em;
            text-transform: uppercase;
            min-width: 70px;
            height: 44px;
            border-radius: 50px;
            transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
            color: {{#if drop.button_text_color}}{{drop.button_text_color}}{{else}}#ffffff{{/if}};
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            z-index: 10;
        }

        .laylo-rsvp-button:hover {
            text-decoration: none;
            filter: brightness(0.9);
            transform: translateY(-50%) scale(1.02);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
        }

        .laylo-rsvp-button:active {
            transform: translateY(-50%) scale(0.98);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .laylo-rsvp-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: translateY(-50%);
            filter: none;
        }

        .laylo-rsvp-button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
        }

        /* Standalone Button for Email-Only Mode */
        .laylo-rsvp-button.standalone {
            position: static;
            transform: none;
            width: 100%;
            margin-top: 16px;
            height: 56px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            min-width: auto;
            padding: 16px 24px;
            background-color: {{#if drop.button_color}}{{drop.button_color}}{{else}}var(--laylo-button-red){{/if}} !important;
            background: {{#if drop.button_color}}{{drop.button_color}}{{else}}var(--laylo-button-red){{/if}} !important;
            color: {{#if drop.button_text_color}}{{drop.button_text_color}}{{else}}#ffffff{{/if}} !important;
        }

        .laylo-rsvp-button.standalone:hover {
            transform: scale(1.02);
        }

        .laylo-rsvp-button.standalone:active {
            transform: scale(0.98);
        }

        .laylo-rsvp-button.standalone:disabled {
            transform: none;
        }

        /* Form Footer - Adaptive Color */
        .laylo-form-footer {
            font-family: "Inter", sans-serif;
            font-weight: 400;
            font-size: 0.875rem;
            line-height: 1.57;
            letter-spacing: 0.00714em;
            {{#if (eq drop.card_background_type "solid_white")}}
            color: #666666;
            {{else}}
            color: var(--laylo-text-secondary);
            {{/if}}
            margin: 0;
            text-align: left;
            margin-top: 12.5px;
        }

        .laylo-form-footer a {
            color: inherit;
            text-decoration: underline;
            text-decoration-color: currentcolor;
        }

        .laylo-form-footer a:hover {
            text-decoration: none;
        }

        /* Laylo Branding - Exact Style */
        .laylo-branding {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 4px;
            justify-content: center;
            margin-top: 16px;
        }

        .laylo-branding-text {
            font-family: "Inter", sans-serif;
            font-weight: 400;
            font-size: 1rem;
            line-height: 1.5;
            letter-spacing: 0.00938em;
            color: var(--laylo-text-secondary);
            margin: 0;
        }

        .laylo-branding-link {
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            color: var(--laylo-text-secondary);
            transition: color 0.2s ease;
        }

        .laylo-branding-link:hover {
            color: #1795B0;
        }

        .laylo-branding-arrow {
            margin-left: 4px;
        }

        /* Success/Error Messages - Exact Laylo Style */
        .laylo-message {
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 16px;
            text-align: center;
            font-weight: 500;
            font-family: "Inter", sans-serif;
        }

        .laylo-success {
            background: #10B981;
            color: white;
        }

        .laylo-error {
            background: #EF4444;
            color: white;
        }

        /* Industry-Leading Responsive Design System */

        /* Large Desktop: 1920px+ */
        @media only screen and (min-width: 1920px) {
            .drop-page-container {
                padding: clamp(60px, 12vh, 120px) clamp(200px, 15vw, 300px) 24px;
            }

            .drop-container {
                max-width: 1600px;
            }
        }

        /* Desktop: 1440px - 1919px */
        @media only screen and (max-width: 1919px) and (min-width: 1440px) {
            .drop-page-container {
                padding: clamp(40px, 10vh, 100px) clamp(120px, 12vw, 200px) 24px;
            }
        }

        /* Medium Desktop: 1024px - 1439px */
        @media only screen and (max-width: 1439px) and (min-width: 1024px) {
            .drop-page-container {
                padding: clamp(32px, 8vh, 80px) clamp(80px, 10vw, 150px) 24px;
            }

            .drop-title {
                font-size: clamp(36px, 5vw, 48px);
                line-height: 1.1;
            }
        }

        /* Tablet: 768px - 1023px */
        @media only screen and (max-width: 1023px) and (min-width: 768px) {
            .drop-page-container {
                padding: clamp(24px, 6vh, 60px) clamp(40px, 8vw, 80px) 24px;
            }

            .drop-container {
                grid-template-columns: 1fr;
                gap: clamp(16px, 4vw, 32px);
                text-align: center;
            }

            .drop-image-container {
                grid-column: 1;
                max-width: min(500px, 80vw);
                margin: 0 auto;
            }

            .rsvp-container {
                grid-column: 1;
                max-width: min(400px, 90vw);
                margin: 0 auto;
                padding-bottom: 24px;
            }

            .drop-title {
                font-size: clamp(28px, 6vw, 36px);
                line-height: 1.2;
                text-align: center;
            }
        }

        /* Mobile Large: 375px - 767px */
        @media only screen and (max-width: 767px) and (min-width: 375px) {
            .drop-page-container {
                padding: clamp(16px, 4vh, 40px) clamp(16px, 4vw, 32px) 60px;
            }

            .drop-container {
                grid-template-columns: 1fr;
                gap: clamp(12px, 3vw, 24px);
                text-align: center;
            }

            .drop-image-container {
                grid-column: 1;
                max-width: min(350px, 85vw);
                margin: 0 auto;
            }

            .rsvp-container {
                grid-column: 1;
                max-width: min(350px, 90vw);
                margin: 0 auto;
                padding-bottom: 16px;
            }

            .drop-title {
                font-size: clamp(24px, 7vw, 32px);
                line-height: 1.2;
                text-align: center;
                margin: 8px 0;
            }

            .rsvp-card-container {
                margin-top: 16px;
                min-width: auto;
                max-width: 100%;
            }

            /* Mobile form optimizations */
            .phone-input-container {
                height: 52px;
                padding: 10px 14px;
            }

            .laylo-rsvp-button {
                height: 40px;
                padding: 8px 16px;
                font-size: 0.8rem;
                min-width: 60px;
            }

            .phone-input-field {
                padding: 0 75px 0 0;
                font-size: 0.9rem;
            }
        }

        /* Mobile Small: 320px - 374px */
        @media only screen and (max-width: 374px) {
            .drop-page-container {
                padding: 16px 12px 50px;
            }

            .drop-container {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .drop-image-container {
                max-width: 95vw;
                margin: 0 auto;
            }

            .rsvp-container {
                max-width: 95vw;
                margin: 0 auto;
                padding-bottom: 12px;
            }

            .drop-title {
                font-size: clamp(20px, 6vw, 28px);
                line-height: 1.3;
                text-align: center;
                margin: 6px 0;
            }

            .rsvp-card-container {
                margin-top: 12px;
            }

            .laylo-rsvp-card {
                padding: 20px;
            }

            .phone-input-container {
                height: 48px;
                padding: 8px 12px;
            }

            .laylo-rsvp-button {
                height: 36px;
                padding: 6px 12px;
                font-size: 0.75rem;
                min-width: 55px;
            }

            .phone-input-field {
                padding: 0 65px 0 0;
                font-size: 0.85rem;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none;
        }

        .visually-hidden {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            padding: 0 !important;
            margin: -1px !important;
            overflow: hidden !important;
            clip: rect(0, 0, 0, 0) !important;
            white-space: nowrap !important;
            border: 0 !important;
        }

        /* Removed duplicate background system to prevent layering issues */

        /* Ensure proper stacking and eliminate white background artifacts */
        .drop-container {
            position: relative;
            z-index: 1;
            background: transparent !important;
        }

        /* Force transparent backgrounds on all elements to prevent white artifacts */
        .drop-image-container,
        .rsvp-container,
        .rsvp-card-container,
        .user-container,
        .avatar,
        .avatar div {
            background: transparent !important;
        }

        /* Ensure body and html have no background */
        body::before,
        body::after,
        html::before,
        html::after {
            display: none !important;
        }
    </style>
</head>
<body style="font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
    <div class="drop-page-container">
        <div class="drop-container">
            <!-- Image Container - Exact Laylo Style -->
            <div class="drop-image-container">
                {{#if drop.cover_image}}
                <img src="{{drop.cover_image}}" alt="{{drop.title}}" />
                {{/if}}
            </div>

            <!-- RSVP Container - Exact Laylo Style -->
            <div class="rsvp-container">
                <!-- Title - Now shows the actual drop title -->
                <h1 class="drop-title">{{drop.title}}</h1>

                <!-- User Container - Now shows description/subtitle -->
                <div class="user-container">
                    <div class="avatar">
                        <div style="background-image: url('{{drop.cover_image}}'); background-size: cover; background-position: center center; width: 100%; height: 100%; border-radius: 50%;"></div>
                    </div>
                    <div class="username">{{#if drop.description}}{{drop.description}}{{else}}Get notified when this drops{{/if}}</div>
                </div>

                <!-- RSVP Card Container -->
                <div class="rsvp-card-container">
                    <div class="laylo-rsvp-card">
                        <!-- Success/Error Messages -->
                        <div id="success-message" class="laylo-message laylo-success hidden">
                            <p id="success-text">Thank you! You're on the list.</p>
                        </div>
                        <div id="error-message" class="laylo-message laylo-error hidden">
                            <p id="error-text">Something went wrong. Please try again.</p>
                        </div>

                        <!-- Card Title -->
                        <h3 class="laylo-card-title">Get notified</h3>

                        <!-- Dynamic Form Based on Collection Settings -->
                        <form id="drop-signup-form">
                            {{#if drop.collect_email}}
                            <!-- Email Input Field -->
                            <div class="email-input-container">
                                <input
                                    type="email"
                                    name="email"
                                    placeholder="your@email.com"
                                    class="email-input-field"
                                    value=""
                                    autocomplete="email"
                                    {{#if drop.collect_email}}required{{/if}}
                                />
                            </div>
                            {{/if}}

                            {{#if drop.collect_phone}}
                            <!-- Phone Input Container with Conditional Inlaid Button -->
                            <div class="phone-input-container">
                                <!-- Functional Country Select -->
                                <div class="phone-country-select" id="country-selector">
                                    <div class="phone-country-flag" id="selected-country">
                                        <img alt="United States" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjQjIyMjM0Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCAwSDIxVjFIMFYwWk0wIDJIMjFWM0gwVjJaTTAgNEgyMVY1SDBWNFpNMCA2SDIxVjdIMFY2Wk0wIDhIMjFWOUgwVjhaTTAgMTBIMjFWMTFIMFYxMFpNMCAxMkgyMVYxM0gwVjEyWiIgZmlsbD0id2hpdGUiLz4KPHJlY3Qgd2lkdGg9IjkiIGhlaWdodD0iOCIgZmlsbD0iIzNDM0I2RSIvPgo8L3N2Zz4K" />
                                        <span class="country-code">+1</span>
                                        <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                                            <path d="M1 1L6 6L11 1" stroke="rgba(255,255,255,0.7)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>

                                    <!-- Country Dropdown -->
                                    <div class="country-dropdown hidden" id="country-dropdown">
                                        <div class="country-search">
                                            <input type="text" placeholder="Search countries..." id="country-search" />
                                        </div>
                                        <div class="country-list" id="country-list">
                                            <div class="country-option" data-code="+1" data-country="US">
                                                <img alt="United States" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjQjIyMjM0Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCAwSDIxVjFIMFYwWk0wIDJIMjFWM0gwVjJaTTAgNEgyMVY1SDBWNFpNMCA2SDIxVjdIMFY2Wk0wIDhIMjFWOUgwVjhaTTAgMTBIMjFWMTFIMFYxMFpNMCAxMkgyMVYxM0gwVjEyWiIgZmlsbD0id2hpdGUiLz4KPHJlY3Qgd2lkdGg9IjkiIGhlaWdodD0iOCIgZmlsbD0iIzNDM0I2RSIvPgo8L3N2Zz4K" />
                                                <span>United States (+1)</span>
                                            </div>
                                            <div class="country-option" data-code="+44" data-country="GB">
                                                <img alt="United Kingdom" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjMDEyMTY5Ii8+CjxwYXRoIGQ9Ik0wIDBoMjF2MTVIMHoiIGZpbGw9IiMwMTIxNjkiLz4KPHBhdGggZD0iTTAgMGgyMXYxNUgweiIgZmlsbD0iIzAxMjE2OSIvPgo8L3N2Zz4K" />
                                                <span>United Kingdom (+44)</span>
                                            </div>
                                            <div class="country-option" data-code="+1" data-country="CA">
                                                <img alt="Canada" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjRkYwMDAwIi8+CjxwYXRoIGQ9Ik03IDBoN3YxNUg3eiIgZmlsbD0iI0ZGRkZGRiIvPgo8L3N2Zz4K" />
                                                <span>Canada (+1)</span>
                                            </div>
                                            <div class="country-option" data-code="+61" data-country="AU">
                                                <img alt="Australia" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjMDEyMTY5Ii8+Cjwvc3ZnPgo=" />
                                                <span>Australia (+61)</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Industry-Standard Phone Input Field -->
                                <input
                                    type="tel"
                                    name="phone"
                                    placeholder="(555) 123-4567"
                                    class="phone-input-field"
                                    value=""
                                    maxlength="14"
                                    autocomplete="tel"
                                    {{#if drop.collect_phone}}required{{/if}}
                                />

                                {{#if (and drop.collect_phone (not drop.collect_email))}}
                                <!-- Inlaid Button for Phone-Only Mode -->
                                <button type="submit" class="laylo-rsvp-button inlaid" name="rsvp" alt="Confirm RSVP" title="Confirm RSVP">
                                    {{#if drop.button_text}}{{drop.button_text}}{{else}}RSVP{{/if}}
                                </button>
                                {{else if (and drop.collect_phone drop.collect_email)}}
                                <!-- Inlaid Button for Both Fields Mode -->
                                <button type="submit" class="laylo-rsvp-button inlaid" name="rsvp" alt="Confirm RSVP" title="Confirm RSVP">
                                    {{#if drop.button_text}}{{drop.button_text}}{{else}}RSVP{{/if}}
                                </button>
                                {{/if}}
                            </div>
                            {{/if}}

                            {{#if (and drop.collect_email (not drop.collect_phone))}}
                            <!-- Standalone Button for Email-Only Mode -->
                            <button type="submit" class="laylo-rsvp-button standalone" name="rsvp" alt="Confirm RSVP" title="Confirm RSVP">
                                {{#if drop.button_text}}{{drop.button_text}}{{else}}RSVP{{/if}}
                            </button>
                            {{/if}}
                        </form>

                        <!-- Form Footer -->
                        <div class="laylo-form-footer">
                            This site is protected by reCaptcha. By submitting my information, I agree to receive recurring automated messages to the contact information provided and to <a href="https://laylo.com/terms" target="_blank">Laylo's Terms of Service</a>, <a href="https://laylo.com/cookies" target="_blank">Cookie Policy</a> and <a href="https://laylo.com/privacy" target="_blank">Privacy Policy</a>. Msg & Data Rates may apply. Reply STOP to cancel, HELP for help.
                        </div>

                        <!-- Laylo Branding -->
                        <div class="laylo-branding">
                            <div class="laylo-branding-link">
                                <svg width="45" height="13" viewBox="5 3 110 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M22.4994 35.0021C28.3365 35.0021 33.395 31.6682 35.8745 26.8006C38.2189 26.3869 39.9998 24.3397 39.9998 21.8766C39.9998 19.9366 38.895 18.2546 37.2802 17.4255C36.059 10.3678 29.906 5 22.4994 5C15.0925 5 8.93944 10.3681 7.71848 17.4261C6.10431 18.2553 5 19.937 5 21.8766C5 24.3393 6.78032 26.3862 9.12416 26.8004C11.6036 31.6681 16.6621 35.0021 22.4994 35.0021ZM10.0017 20.0014C10.0017 21.2156 10.1748 22.3893 10.4977 23.4993C13.8413 26.0122 17.9982 27.5014 22.5029 27.5014C27.0072 27.5014 31.1638 26.0125 34.5072 23.5C34.8302 22.3898 35.0034 21.2158 35.0034 20.0014C35.0034 13.0973 29.4066 7.50049 22.5026 7.50049C15.5985 7.50049 10.0017 13.0973 10.0017 20.0014ZM12.5086 18.7445C12.4227 19.4344 12.9945 20.0007 13.6897 20.0007C14.3849 20.0007 14.9374 19.4329 15.0519 18.7473C15.5809 15.5805 18.0805 13.0809 21.2472 12.552C21.9329 12.4374 22.5007 11.8849 22.5007 11.1897C22.5007 10.4945 21.9343 9.92274 21.2445 10.0086C16.6875 10.5757 13.0756 14.1876 12.5086 18.7445ZM44.9998 28.6138H58.6941V24.1321H50.5013V8.12605H44.9998V28.6138ZM64.6748 28.8539C66.6537 28.8539 68.1478 28.1737 69.068 26.453H69.1868V28.6138H74.2924V18.0898C74.2924 15.2488 71.6308 13.0479 67.287 13.0479C62.7453 13.0479 60.5091 15.4488 60.3211 18.2499H65.3476C65.4762 17.2995 66.1689 16.8494 67.2078 16.8494C68.1577 16.8494 68.8306 17.2895 68.8306 18.0898V18.1299C68.8306 19.0202 67.8609 19.3003 65.308 19.4904C62.1714 19.7205 59.7274 21.0009 59.7274 24.3722C59.7274 27.4334 61.7657 28.8539 64.6748 28.8539ZM66.4558 25.3726C65.5257 25.3726 64.8727 24.9124 64.8727 24.0521C64.8727 23.2618 65.4268 22.6516 66.6933 22.4515C67.564 22.3114 68.2962 22.1314 68.8701 21.8913V23.1718C68.8701 24.5723 67.6927 25.3726 66.4558 25.3726ZM85.5767 29.8943C84.7356 32.4353 82.9447 34.376 79.1253 34.376C77.8687 34.376 76.6912 34.176 75.8403 33.8358L77.0276 29.9143C78.3733 30.3945 79.4321 30.4245 79.7982 29.5742L79.9169 29.2941L74.5738 13.248H80.2731L82.727 23.8921H82.8853L85.3788 13.248H91.1178L85.5767 29.8943ZM97.5758 8.12605H92.114V28.6138H97.5758V8.12605ZM115 20.9709C115 25.6927 112.071 28.894 107.124 28.894C102.176 28.894 99.2474 25.6927 99.2474 20.9709C99.2474 16.2491 102.176 13.0479 107.124 13.0479C112.071 13.0479 115 16.2491 115 20.9709ZM104.828 20.9309C104.828 23.3418 105.699 24.8124 107.163 24.8124C108.548 24.8124 109.419 23.3418 109.419 20.9309C109.419 18.52 108.548 17.0494 107.163 17.0494C105.699 17.0494 104.828 18.52 104.828 20.9309Z" fill="#687178"/>
                                </svg>
                                <span class="laylo-branding-text">Make a Drop like this</span>
                                <svg class="laylo-branding-arrow" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#687178" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for Form Handling -->
    <script>
        // Production-ready drop landing page

        document.addEventListener('DOMContentLoaded', function() {
            // Debug: Log drop configuration
            console.log('🔍 Drop Configuration:', {
                collect_phone: {{#if drop.collect_phone}}true{{else}}false{{/if}},
                collect_email: {{#if drop.collect_email}}true{{else}}false{{/if}},
                button_color: '{{drop.button_color}}',
                button_text: '{{drop.button_text}}'
            });

            const form = document.getElementById('drop-signup-form');
            const phoneInput = document.querySelector('input[name="phone"]');
            const emailInput = document.querySelector('input[name="email"]');
            const submitButton = form.querySelector('button[type="submit"]');
            const successMessage = document.getElementById('success-message');
            const errorMessage = document.getElementById('error-message');

            // Enhanced Form submission handler for dynamic fields
            form.addEventListener('submit', async function(e) {
                e.preventDefault();

                const formData = new FormData(form);
                const phone = formData.get('phone');
                const email = formData.get('email');

                // Hide previous messages
                successMessage.classList.add('hidden');
                errorMessage.classList.add('hidden');

                // Disable button and show loading state
                submitButton.disabled = true;
                const originalText = submitButton.textContent;
                submitButton.textContent = 'RSVP...';

                // Prepare data to send based on what fields are collected
                const dataToSend = {};
                if (phone && phone.trim()) dataToSend.phone = phone;
                if (email && email.trim()) dataToSend.email = email;

                console.log('📤 Submitting form data:', dataToSend);
                console.log('📍 Endpoint:', '/drop/signup/{{drop.slug}}');

                try {
                    const response = await fetch('/drop/signup/{{drop.slug}}', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(dataToSend)
                    });

                    console.log('📥 Response status:', response.status);
                    console.log('📥 Response headers:', Object.fromEntries(response.headers.entries()));

                    const result = await response.json();
                    console.log('📥 Response data:', result);

                    if (response.ok) {
                        successMessage.classList.remove('hidden');
                        document.getElementById('success-text').textContent = 'Thank you! You\'re on the list.';
                        // Don't reset form to keep the data visible
                    } else {
                        console.error('❌ Server error:', result);
                        errorMessage.classList.remove('hidden');
                        document.getElementById('error-text').textContent = result.message || `Server error: ${response.status}`;
                    }
                } catch (error) {
                    console.error('❌ Form submission error:', error);
                    errorMessage.classList.remove('hidden');
                    document.getElementById('error-text').textContent = `Network error: ${error.message}`;
                } finally {
                    submitButton.disabled = false;
                    submitButton.textContent = originalText;
                }
            });

            // Industry-Standard Phone Input with Real-time Formatting
            if (phoneInput) {
                // Phone number formatting function
                function formatPhoneNumber(value) {
                    // Remove all non-numeric characters
                    const phoneNumber = value.replace(/[^\d]/g, '');

                    // Don't format if empty
                    if (phoneNumber.length === 0) return '';

                    // Format based on length
                    if (phoneNumber.length <= 3) {
                        return `(${phoneNumber}`;
                    } else if (phoneNumber.length <= 6) {
                        return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(3)}`;
                    } else {
                        return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(3, 6)}-${phoneNumber.slice(6, 10)}`;
                    }
                }

                // Validate phone number
                function isValidPhoneNumber(value) {
                    const phoneNumber = value.replace(/[^\d]/g, '');
                    return phoneNumber.length === 10;
                }

                // Add visual feedback for validation
                function updateValidationState(isValid) {
                    const container = phoneInput.closest('.phone-input-container');
                    if (isValid) {
                        container.style.borderColor = '#10B981';
                        container.style.boxShadow = '0 0 0 1px #10B981';
                    } else if (phoneInput.value.length > 0) {
                        container.style.borderColor = '#EF4444';
                        container.style.boxShadow = '0 0 0 1px #EF4444';
                    } else {
                        container.style.borderColor = '';
                        container.style.boxShadow = '';
                    }
                }

                // Real-time formatting on input
                phoneInput.addEventListener('input', function(e) {
                    const cursorPosition = e.target.selectionStart;
                    const oldValue = e.target.value;
                    const newValue = formatPhoneNumber(e.target.value);

                    e.target.value = newValue;

                    // Maintain cursor position
                    const newCursorPosition = cursorPosition + (newValue.length - oldValue.length);
                    e.target.setSelectionRange(newCursorPosition, newCursorPosition);

                    // Update validation state
                    updateValidationState(isValidPhoneNumber(newValue));
                });

                // Focus styling
                phoneInput.addEventListener('focus', function(e) {
                    e.target.closest('.phone-input-container').style.backgroundColor = 'var(--laylo-input-focus)';
                });

                // Blur styling and validation
                phoneInput.addEventListener('blur', function(e) {
                    e.target.closest('.phone-input-container').style.backgroundColor = 'var(--laylo-input-bg)';
                    updateValidationState(isValidPhoneNumber(e.target.value));
                });

                // Prevent invalid characters
                phoneInput.addEventListener('keydown', function(e) {
                    // Allow: backspace, delete, tab, escape, enter
                    if ([8, 9, 27, 13, 46].indexOf(e.keyCode) !== -1 ||
                        // Allow: Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X
                        (e.keyCode === 65 && e.ctrlKey === true) ||
                        (e.keyCode === 67 && e.ctrlKey === true) ||
                        (e.keyCode === 86 && e.ctrlKey === true) ||
                        (e.keyCode === 88 && e.ctrlKey === true)) {
                        return;
                    }
                    // Ensure that it is a number and stop the keypress
                    if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                        e.preventDefault();
                    }
                });

                // Form validation enhancement
                const form = phoneInput.closest('form');
                if (form) {
                    form.addEventListener('submit', function(e) {
                        if (!isValidPhoneNumber(phoneInput.value)) {
                            e.preventDefault();
                            updateValidationState(false);
                            phoneInput.focus();

                            // Show error message
                            const errorMessage = document.getElementById('error-message');
                            const errorText = document.getElementById('error-text');
                            if (errorMessage && errorText) {
                                errorText.textContent = 'Please enter a valid 10-digit phone number.';
                                errorMessage.classList.remove('hidden');
                            }
                            return false;
                        }
                    });
                }
            }

            // Email Input Validation
            if (emailInput) {
                // Email validation function
                function isValidEmail(email) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    return emailRegex.test(email);
                }

                // Add visual feedback for email validation
                function updateEmailValidationState(isValid) {
                    const container = emailInput.closest('.email-input-container');
                    if (isValid) {
                        container.style.borderColor = '#10B981';
                        container.style.boxShadow = '0 0 0 1px #10B981';
                        container.classList.add('valid');
                        container.classList.remove('invalid');
                    } else if (emailInput.value.length > 0) {
                        container.style.borderColor = '#EF4444';
                        container.style.boxShadow = '0 0 0 1px #EF4444';
                        container.classList.add('invalid');
                        container.classList.remove('valid');
                    } else {
                        container.style.borderColor = '';
                        container.style.boxShadow = '';
                        container.classList.remove('valid', 'invalid');
                    }
                }

                // Real-time email validation
                emailInput.addEventListener('input', function(e) {
                    updateEmailValidationState(isValidEmail(e.target.value));
                });

                // Focus styling
                emailInput.addEventListener('focus', function(e) {
                    e.target.closest('.email-input-container').style.backgroundColor = 'var(--laylo-input-focus)';
                });

                // Blur styling and validation
                emailInput.addEventListener('blur', function(e) {
                    e.target.closest('.email-input-container').style.backgroundColor = 'var(--laylo-input-bg)';
                    updateEmailValidationState(isValidEmail(e.target.value));
                });

                // Form validation enhancement for email
                form.addEventListener('submit', function(e) {
                    if (emailInput.hasAttribute('required') && !isValidEmail(emailInput.value)) {
                        e.preventDefault();
                        updateEmailValidationState(false);
                        emailInput.focus();

                        // Show error message
                        const errorMessage = document.getElementById('error-message');
                        const errorText = document.getElementById('error-text');
                        if (errorMessage && errorText) {
                            errorText.textContent = 'Please enter a valid email address.';
                            errorMessage.classList.remove('hidden');
                        }
                        return false;
                    }
                });
            }

            // Functional Country Selector
            const countrySelector = document.getElementById('country-selector');
            const selectedCountry = document.getElementById('selected-country');
            const countryDropdown = document.getElementById('country-dropdown');
            const countrySearch = document.getElementById('country-search');
            const countryList = document.getElementById('country-list');

            if (countrySelector && selectedCountry && countryDropdown) {
                let currentCountryCode = '+1';

                // Toggle dropdown
                selectedCountry.addEventListener('click', function(e) {
                    e.stopPropagation();
                    countryDropdown.classList.toggle('hidden');
                    countrySelector.classList.toggle('open');

                    if (!countryDropdown.classList.contains('hidden')) {
                        countrySearch.focus();
                    }
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', function(e) {
                    if (!countrySelector.contains(e.target)) {
                        countryDropdown.classList.add('hidden');
                        countrySelector.classList.remove('open');
                    }
                });

                // Country search functionality
                if (countrySearch) {
                    countrySearch.addEventListener('input', function(e) {
                        const searchTerm = e.target.value.toLowerCase();
                        const countryOptions = countryList.querySelectorAll('.country-option');

                        countryOptions.forEach(option => {
                            const countryName = option.textContent.toLowerCase();
                            if (countryName.includes(searchTerm)) {
                                option.style.display = 'flex';
                            } else {
                                option.style.display = 'none';
                            }
                        });
                    });
                }

                // Country selection
                const countryOptions = countryList.querySelectorAll('.country-option');
                countryOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const code = this.dataset.code;
                        const country = this.dataset.country;
                        const img = this.querySelector('img').cloneNode(true);

                        // Update selected country display
                        const selectedFlag = selectedCountry.querySelector('img');
                        const selectedCode = selectedCountry.querySelector('.country-code');

                        selectedFlag.src = img.src;
                        selectedFlag.alt = img.alt;
                        selectedCode.textContent = code;

                        currentCountryCode = code;

                        // Close dropdown
                        countryDropdown.classList.add('hidden');
                        countrySelector.classList.remove('open');

                        // Clear search
                        countrySearch.value = '';
                        countryOptions.forEach(opt => opt.style.display = 'flex');

                        // Update phone number formatting based on country
                        if (phoneInput) {
                            phoneInput.focus();
                        }
                    });
                });
            }

            // Laylo branding link
            const layloLink = document.querySelector('.laylo-branding-link');
            if (layloLink) {
                layloLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.open('https://laylo.com', '_blank');
                });
            }
        });
    </script>
</body>
</html>
