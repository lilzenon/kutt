<!DOCTYPE html>
<html lang="en">
<head>
    <title>{{drop.title}} - BOUNCE2BOUNCE</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="{{drop.description}}">
    <meta name="keywords" content="music, artist, drop, signup, {{drop.title}}">
    <meta name="author" content="BOUNCE2BOUNCE">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="{{drop.title}} - BOUNCE2BOUNCE">
    <meta property="og:description" content="{{drop.description}}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://{{default_domain}}/drop/{{drop.slug}}">
    {{#if drop.cover_image}}
    <meta property="og:image" content="{{drop.cover_image}}">
    {{/if}}
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{drop.title}} - BOUNCE2BOUNCE">
    <meta name="twitter:description" content="{{drop.description}}">
    {{#if drop.cover_image}}
    <meta name="twitter:image" content="{{drop.cover_image}}">
    {{/if}}

    <!-- HTML GlobalBank Template Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com"/>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&amp;display=swap" rel="stylesheet"/>
    <link href="https://api.fontshare.com/v2/css?f[]=clash-grotesk@400,300,500&amp;display=swap" rel="stylesheet"/>
    
    <!-- HTML GlobalBank Template CSS -->
    <link rel="stylesheet" href="/css/globalbank-authentic.css"/>

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"/>

    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Laylo-Inspired Design CSS - Updated Typography v2.1 -->
    <style>
        /* CACHE BUSTER: Typography fixes applied - v2.1.0 */
        :root {
            --drop-title-color: {{drop.title_color}};
            --drop-description-color: {{drop.description_color}};
            --drop-button-color: {{drop.button_color}};
            --drop-button-text-color: {{drop.button_text_color}};
            --drop-background-color: {{drop.background_color}};

            /* Dynamic button shadow color - extract RGB values for shadow effects */
            --drop-button-shadow: {{#if drop.button_color}}{{drop.button_color}}{{else}}#000000{{/if}};

            /* Laylo Design System - Exact Colors */
            --laylo-red: #ff0003;
            --laylo-dark: #1F2937;
            --laylo-card-bg: #1a1a1a;
            --laylo-text-primary: #FFFFFF;
            --laylo-text-secondary: #687178;
            --laylo-border-radius: 24px;
            --laylo-button-red: #ff0003;
            --laylo-input-bg: rgba(255, 255, 255, 0.1);
            --laylo-input-focus: rgba(255, 255, 255, 0.15);
        }

        /* Reset and Base Styles */
        * {
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            min-height: 100vh;
            min-height: 100dvh; /* Dynamic viewport height for mobile */
            font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            overscroll-behavior: none;
            background: transparent !important;
            overflow-x: hidden;
            /* Mobile scrolling optimization */
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
            touch-action: pan-y; /* Allow vertical scrolling only */
        }

        /* Enhanced Background System - Mobile-Optimized */
        .drop-page-container {
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: clamp(16px, 12vh, 120px) clamp(16px, 12vw, 185.5px) 24px;
            min-height: 100vh;
            min-height: 100dvh; /* Dynamic viewport height for mobile */
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
            {{#if (eq drop.background_type "solid")}}
            background: {{#if drop.background_color}}{{drop.background_color}}{{else}}var(--laylo-red){{/if}};
            {{else}}
                {{#if drop.gradient_data}}
                    {{! Use gradient data if available }}
                    background: {{{parseGradientData drop.gradient_data}}};
                {{else}}
                    {{! Fallback gradient }}
                    background: linear-gradient(
                        179deg,
                        {{#if drop.background_color}}{{drop.background_color}}{{else}}var(--laylo-red){{/if}} 0%,
                        {{#if drop.background_color}}{{drop.background_color}}CC{{else}}#DC2626CC{{/if}} 30%,
                        {{#if drop.background_color}}{{drop.background_color}}80{{else}}#DC262680{{/if}} 60%,
                        rgba(0, 0, 0, 0.9) 100%
                    );
                {{/if}}
            {{/if}}
            background-attachment: scroll; /* Fixed attachment causes issues on mobile */
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center center;
        }

        /* MAIN CONTAINER - Mobile First Approach */
        .drop-container {
            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: auto auto auto;
            grid-template-areas:
                "image"
                "title"
                "form";
            gap: 4px; /* Reduced from 8px (50% reduction) */
            width: 100%;
            max-width: 1400px;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            padding: 0 16px;
        }

        /* Tablet Layout: Stacked layout with better spacing */
        @media (min-width: 768px) and (max-width: 1023px) {
            .drop-container {
                gap: 8px; /* Reduced from 16px (50% reduction) */
                padding: 0 24px;
                max-width: 800px; /* Increased from 600px to better utilize tablet screen space */
            }
        }

        /* Desktop Layout: Proper CSS Grid side-by-side layout */
        @media (min-width: 1024px) {
            .drop-container {
                grid-template-columns: 1fr 420px; /* Slightly wider content area for better balance */
                grid-template-rows: auto 1fr; /* Title takes needed space, form takes remaining space */
                grid-template-areas:
                    "image title"
                    "image form"; /* Proper grid area for form */
                gap: 0px 48px; /* Eliminated row gap completely for tighter spacing */
                align-items: start;
                max-width: 1240px; /* Slightly wider to accommodate new proportions */
                padding: 40px 24px;
                min-height: 100vh;
                box-sizing: border-box;
            }
        }

        /* Image Container - Responsive Design */
        .drop-image-container {
            grid-area: image;
            position: relative;
            width: 100%;
            max-width: 100%;
            height: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            background: transparent;
            overflow: visible;
            margin: 0 auto 16px auto; /* Bottom margin for mobile spacing */
        }

        /* Tablet image container - Better space utilization */
        @media (min-width: 768px) and (max-width: 1023px) {
            .drop-image-container {
                max-width: 700px; /* Allow larger images on tablet */
                margin: 0 auto 24px auto; /* Center with better bottom spacing */
            }
        }

        /* Desktop image container */
        @media (min-width: 1024px) {
            .drop-image-container {
                max-width: min(690px, 58.3333vw);
                margin-bottom: 0;
                align-self: start; /* Align to top instead of center */
                justify-content: flex-start; /* Left-align image within container */
                margin-left: 0; /* Ensure left alignment */
                overflow: visible; /* Allow full image display without cropping */
            }
        }

        .drop-image-container img {
            width: 100%;
            height: auto;
            max-width: 100%;
            max-height: 100%; /* Ensure image respects container height */
            border-radius: 12px;
            object-fit: contain; /* Ensure full image is visible without cropping */
            object-position: center center;
            background: transparent;
            opacity: 0;
            animation: bloom 0.3s cubic-bezier(0.2, 0.2, 0.25, 1) normal forwards;
            animation-delay: 0.15s;
            display: block;
        }

        /* Desktop image sizing - Ensure full image visibility */
        @media (min-width: 1024px) {
            .drop-image-container img {
                object-fit: contain; /* Ensure full image is visible without cropping */
                object-position: center center; /* Center the image properly */
            }
        }



        @keyframes bloom {
            0% {
                opacity: 0;
                filter: blur(2rem);
                transform: perspective(10rem) translateZ(-2rem);
            }
            100% {
                opacity: 1;
                filter: blur(0);
                transform: perspective(10rem) translateZ(0);
            }
        }

        /* Title Section - Responsive alignment */
        .drop-title-section {
            grid-area: title;
            width: 100%;
            max-width: 100%;
            padding: 0; /* Clean padding for all devices */
            box-sizing: border-box;
            margin: 0 auto; /* Clean margins */
            overflow: visible;
            text-align: center; /* Center on mobile/tablet */
        }

        /* Mobile title section */
        @media (max-width: 767px) {
            .drop-title-section {
                padding: 8px 16px 12px 16px;
            }
        }

        /* Tablet title section */
        @media (min-width: 768px) and (max-width: 1023px) {
            .drop-title-section {
                margin: 0 auto;
                padding: 0 16px;
            }
        }

        /* Desktop title section - proper grid positioning */
        @media (min-width: 1024px) {
            .drop-title-section {
                grid-area: title; /* Use proper grid area */
                max-width: 420px;
                margin: 0; /* Clean margins */
                padding: 0; /* Clean padding */
                text-align: left; /* Left-aligned to match form */
                align-self: start;
                justify-self: start; /* Align to left side of grid area */
                width: 420px;
                min-width: 420px;
            }
        }

        /* RSVP Container - Responsive Layout */
        .rsvp-container {
            grid-area: form;
            width: 100%;
            max-width: 100%;
            padding-bottom: 32px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center; /* Center on mobile/tablet */
            background: transparent;
            margin: 0 auto;
            box-sizing: border-box;
        }

        /* Tablet RSVP container */
        @media (min-width: 768px) and (max-width: 1023px) {
            .rsvp-container {
                width: 100% !important;
                max-width: 100% !important;
                min-width: auto !important;
            }
        }

        /* Desktop RSVP container - Proper CSS Grid positioning */
        @media (min-width: 1024px) {
            .rsvp-container {
                grid-area: form; /* Use proper grid area */
                width: 420px !important;
                max-width: 420px !important;
                min-width: 420px !important;
                align-items: flex-start;
                align-self: start;
                padding-bottom: 40px; /* Add bottom padding for proper spacing */
                margin: -24px 0 0 0 !important; /* Negative margin to pull form closer to subtitle */
                justify-self: start; /* Align to left side of grid area */
            }
        }

        /* Title - Responsive alignment and sizing */
        .drop-title {
            /* TYPOGRAPHY: Responsive font sizes */
            font-size: clamp(32px, 8vw, 52px) !important; /* Responsive sizing */
            line-height: 1.1 !important;
            letter-spacing: -0.5px !important;
            font-weight: 700 !important;

            /* SPACING: Clean margins */
            margin: 0 0 16px 0 !important; /* Clean top margin, proper bottom spacing */
            padding: 0 !important;

            /* LAYOUT: Responsive alignment */
            width: auto !important;
            max-width: none !important;
            box-sizing: border-box !important;
            overflow: visible !important;
            /* Inherit text-align from parent (.drop-title-section) */

            /* VISUAL: Enhanced rendering */
            color: {{#if drop.title_color}}{{drop.title_color}}{{else}}var(--laylo-text-primary){{/if}};
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-wrap: wrap;
            white-space-collapse: preserve-breaks;
        }

        /* Subtitle Base Styling */
        .drop-subtitle {
            font-family: "Inter", sans-serif;
            font-weight: 400; /* Lighter than title */
            color: {{#if drop.title_color}}{{drop.title_color}}{{else}}var(--laylo-text-primary){{/if}};
            opacity: 0.85; /* Slightly muted */
            margin: 8px 0 0 0; /* Minimal spacing from title */
            padding: 0;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-wrap: wrap;
            white-space-collapse: preserve-breaks;

            /* Mobile/Tablet: Center-aligned */
            text-align: center;
            font-size: clamp(18px, 4vw, 24px); /* Responsive mobile sizing */
            line-height: 1.3;
            letter-spacing: -0.01em;
        }

        /* Desktop title sizing - Clean grid-based layout */
        @media (min-width: 1024px) {
            .drop-title {
                font-size: 56px !important; /* Larger on desktop */
                margin: 0 0 12px 0 !important; /* Reduced bottom spacing when subtitle present */
                line-height: 1.0 !important; /* Tight but readable line-height */
                padding: 0 !important; /* Clean padding */
                text-align: left !important; /* Left-aligned to match form */
            }

            .drop-subtitle {
                font-size: 34px; /* 60% of title size (56px * 0.6 ≈ 34px) */
                text-align: left !important; /* Left-aligned to match title */
                margin: 10px 0 -16px 0; /* Negative bottom margin to pull form much closer */
                line-height: 1.2;
                letter-spacing: -0.02em;
            }
        }

        /* User Container styles removed - subtitle eliminated for cleaner layout */



        /* Avatar and username styles removed - subtitle eliminated for cleaner layout */

        /* RSVP Card Container - Responsive Sizing */
        .rsvp-card-container {
            margin: 0 auto !important;
            width: 100% !important;
            max-width: 100% !important;
            box-sizing: border-box;
        }

        /* Tablet RSVP card container - Better space utilization */
        @media (min-width: 768px) and (max-width: 1023px) {
            .rsvp-card-container {
                width: 100% !important;
                max-width: 500px !important; /* Allow wider cards on tablet */
                margin: 0 auto !important;
            }
        }

        /* Desktop RSVP card container */
        @media (min-width: 1024px) {
            .rsvp-card-container {
                width: 420px !important;
                min-width: 420px !important;
                max-width: 420px !important;
            }
        }

        /* Enhanced RSVP Card System - Laylo-inspired design */
        .laylo-rsvp-card {
            {{#if (eq drop.card_background_type "solid_white")}}
            background-color: #ffffff;
            color: #000000;
            {{else if (eq drop.card_background_type "solid_dark")}}
            background-color: #000000; /* Pure black like Laylo reference */
            color: #ffffff;
            {{else if (eq drop.card_background_type "translucent_light")}}
            background-color: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            backdrop-filter: blur(10px);
            {{else if (eq drop.card_background_type "translucent_dark")}}
            background-color: rgba(0, 0, 0, 0.9); /* Darker for better contrast */
            color: #ffffff;
            backdrop-filter: blur(15px);
            {{else}}
            background-color: #000000; /* Default to pure black like Laylo */
            color: #ffffff;
            {{/if}}
            transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
            border-radius: 20px; /* Rounded corners matching Laylo */
            box-shadow:
                0 24px 48px rgba(0, 0, 0, 0.3),
                0 12px 24px rgba(0, 0, 0, 0.2),
                0 6px 12px rgba(0, 0, 0, 0.1); /* Enhanced shadow for depth like Laylo */
            border: none; /* Clean design without borders like Laylo */
            padding: 40px 32px; /* Enhanced padding following Laylo pattern */
            height: 100%;
        }

        /* Desktop card padding - Proper internal spacing */
        @media (min-width: 1024px) {
            .laylo-rsvp-card {
                padding: 32px 32px 40px 32px !important; /* Restore proper internal padding */
                margin-top: 0 !important; /* Remove negative margin for natural spacing */
            }
        }

        /* Card Title - Laylo-inspired bold design */
        .laylo-card-title {
            font-family: "Inter", sans-serif;
            font-weight: 600; /* Bolder weight following Laylo pattern */
            font-size: 1.125rem; /* Larger size for better hierarchy */
            line-height: 1.3; /* Tighter line-height for modern look */
            letter-spacing: 0.005em; /* Subtle letter-spacing */
            {{#if (eq drop.card_background_type "solid_white")}}
            color: #1a1a1a; /* Stronger contrast */
            {{else}}
            color: #ffffff; /* Pure white like Laylo */
            {{/if}}
            margin: 0 0 20px 0; /* Enhanced spacing following Laylo pattern */
            text-align: center;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
        }

        /* Phone Input Container - Standardized Dimensions */
        .phone-input-container {
            display: flex;
            align-items: center;
            background-color: var(--laylo-input-bg);
            border-radius: 50px;
            padding: 12px 16px;
            margin-bottom: 16px;
            position: relative;
            height: 56px;
            width: 100%;
            box-sizing: border-box;
            transition: background-color 0.3s ease;
        }

        .phone-input-container:focus-within {
            background-color: var(--laylo-input-focus);
        }

        /* Phone input validation states */
        .phone-input-container {
            border: 1px solid transparent;
            transition: all 0.3s ease;
        }

        .phone-input-container.valid {
            border-color: #10B981;
            box-shadow: 0 0 0 1px #10B981;
        }

        .phone-input-container.invalid {
            border-color: #EF4444;
            box-shadow: 0 0 0 1px #EF4444;
        }

        /* Email Input Container - Identical to Phone Input Design */
        .email-input-container {
            display: flex;
            align-items: center;
            background-color: var(--laylo-input-bg);
            border-radius: 50px;
            padding: 12px 16px;
            margin-bottom: 16px;
            position: relative;
            height: 56px;
            width: 100%;
            box-sizing: border-box;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            /* Remove any unwanted glow or border artifacts */
            box-shadow: none;
            outline: none;
        }

        .email-input-container:focus-within {
            background-color: var(--laylo-input-focus);
            box-shadow: none;
        }

        .email-input-container.valid {
            border-color: #10B981;
            box-shadow: 0 0 0 1px #10B981;
        }

        .email-input-container.invalid {
            border-color: #EF4444;
            box-shadow: 0 0 0 1px #EF4444;
        }

        /* Email Input Field - Force Identical Styling to Phone Field */
        .email-input-field {
            flex: 1;
            width: 100%;
            background-color: transparent !important;
            background: transparent !important;
            border: none !important;
            outline: none !important;
            color: white !important;
            font-family: "Inter", sans-serif;
            font-weight: 400;
            font-size: 1.125rem;
            line-height: 1.5;
            letter-spacing: 0.00938em;
            height: 100%;
            box-sizing: border-box;
            /* Force remove any browser defaults */
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            box-shadow: none !important;
        }

        .email-input-field::placeholder {
            color: rgba(255, 255, 255, 0.7) !important;
            opacity: 1 !important;
        }

        .email-input-field:focus {
            outline: none !important;
            background-color: transparent !important;
            background: transparent !important;
            box-shadow: none !important;
        }

        .email-input-field:active {
            background-color: transparent !important;
            background: transparent !important;
        }

        /* Force email container to match phone container exactly */
        .email-input-container {
            background-color: var(--laylo-input-bg) !important;
            background: var(--laylo-input-bg) !important;
        }

        /* Solid White Card Text Visibility Fixes */
        {{#if (eq drop.card_background_type "solid_white")}}
        .email-input-field,
        .phone-input-field {
            color: #1F2937 !important;
        }

        .email-input-field::placeholder,
        .phone-input-field::placeholder {
            color: #6B7280 !important;
            opacity: 1 !important;
        }

        .email-input-container,
        .phone-input-container {
            background-color: rgba(0, 0, 0, 0.05) !important;
            background: rgba(0, 0, 0, 0.05) !important;
            border: 1px solid rgba(0, 0, 0, 0.1) !important;
        }

        .email-input-container:focus-within,
        .phone-input-container:focus-within {
            background-color: rgba(0, 0, 0, 0.08) !important;
            background: rgba(0, 0, 0, 0.08) !important;
            border-color: rgba(0, 0, 0, 0.2) !important;
        }

        .country-code {
            color: #1F2937 !important;
        }
        {{/if}}

        /* Native Country Select - Limited to Flag Icon Area Only */
        .phone-country-select {
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            z-index: 3;
            pointer-events: none; /* Allow clicks to pass through to phone input */
            width: 60px; /* Limit width to flag area only */
        }

        .country-select-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            pointer-events: auto; /* Re-enable pointer events for the select area only */
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 6px;
            padding: 2px 4px;
            height: 28px;
            width: 56px; /* Compact width for flag + dropdown arrow only */
            overflow: hidden; /* Ensure long option text doesn't break layout */
        }

        .country-flag-display {
            position: absolute;
            left: 4px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            pointer-events: none;
            z-index: 2;
        }

        .country-flag-display img {
            width: 20px;
            height: 15px;
            margin-right: 6px;
            border-radius: 2px;
        }

        /* Remove duplicate styling - handled below */

        .country-select:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .country-select:focus {
            background-color: rgba(255, 255, 255, 0.1);
            outline: none;
        }

        /* PRIORITY 1 FIX: Remove duplicate dropdown arrow - only show flag icon */
        .country-select-wrapper::after {
            display: none !important; /* Remove custom dropdown arrow to prevent duplication */
        }

        /* Enhanced country selector styling for better UX */
        .country-select {
            background-color: transparent;
            border: none;
            outline: none;
            color: transparent; /* Hide text, show only flag */
            font-family: "Inter", sans-serif;
            font-weight: 500;
            font-size: 0.875rem;
            padding: 4px 8px 4px 24px; /* Reduced right padding since no custom arrow */
            border-radius: 6px;
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            width: 52px; /* Compact width */
            height: 24px;
            position: relative;
            z-index: 3;
            /* Enhanced mobile support */
            min-height: 44px; /* iOS minimum touch target */
            touch-action: manipulation;
        }

        /* Style the dropdown options when opened */
        .country-select option {
            background-color: #ffffff;
            color: #000000;
            padding: 8px 12px;
            font-size: 14px;
            font-family: "Inter", sans-serif;
            font-weight: 400;
        }

        /* Mobile font-size fix for country select */
        @media screen and (max-width: 767px) {
            .country-select {
                font-size: 16px !important;
            }

            .phone-country-select {
                left: 6px;
                width: 50px; /* Smaller on mobile */
            }

            .country-select-wrapper {
                height: 24px;
                padding: 1px 2px;
                width: 46px; /* Compact mobile width */
            }

            .country-select {
                padding: 2px 12px 2px 20px;
                width: 42px;
                height: 20px;
            }
        }

        /* Sub-header Section - Compact spacing (50% reduction) */
        .drop-sub-header {
            margin-top: 20px; /* Reduced from 40px (50% reduction) */
            max-width: 400px;
            text-align: left; /* Left-aligned like Laylo reference */
            width: 100%;
            box-sizing: border-box;
            padding: 0 10px; /* Reduced from 20px (50% reduction) */
        }

        .drop-sub-header-title {
            font-family: "Inter", sans-serif;
            font-weight: 800; /* Bolder weight following Laylo's strong typography */
            font-size: 2rem; /* Larger size inspired by Laylo's prominent headers */
            line-height: 1.2; /* Tighter line-height for impact */
            letter-spacing: -0.02em; /* Enhanced letter-spacing for modern look */
            {{#if (eq drop.card_background_type "solid_white")}}
            color: #1a1a1a; /* Stronger contrast for white backgrounds */
            {{else}}
            color: #ffffff; /* Pure white for maximum contrast like Laylo */
            {{/if}}
            margin: 0 0 10px 0; /* Reduced from 20px (50% reduction) */
            padding: 0; /* Remove padding for cleaner alignment */
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            text-transform: uppercase; /* Following Laylo's uppercase pattern */
        }

        .drop-sub-header-content {
            font-family: "Inter", sans-serif;
            font-weight: 500; /* Slightly bolder for better hierarchy */
            font-size: 1.125rem; /* Increased size following Laylo pattern */
            line-height: 1.4; /* Tighter line-height for modern look */
            letter-spacing: 0.005em; /* Subtle letter-spacing */
            {{#if (eq drop.card_background_type "solid_white")}}
            color: #4a5568; /* Stronger contrast for readability */
            {{else}}
            color: rgba(255, 255, 255, 0.9); /* Higher opacity like Laylo */
            {{/if}}
            text-align: left;
            margin: 0 0 12px 0; /* Reduced from 24px (50% reduction) */
            padding: 0; /* Remove padding for cleaner alignment */
            display: flex;
            align-items: center;
            gap: 4px; /* Reduced from 8px (50% reduction) */
        }

        /* Responsive sub-header - Compact mobile design (50% spacing reduction) */
        @media screen and (max-width: 767px) {
            .drop-sub-header {
                margin-top: 16px; /* Reduced from 32px (50% reduction) */
                max-width: 100%;
                padding: 0 12px; /* Reduced from 24px (50% reduction) */
            }

            .drop-sub-header-title {
                font-size: 1.75rem; /* Larger on mobile following Laylo pattern */
                padding: 0; /* Clean alignment */
                margin-bottom: 8px; /* Reduced from 16px (50% reduction) */
                text-align: center; /* Center on mobile for better hierarchy */
            }

            .drop-sub-header-content {
                font-size: 1.125rem; /* Improved readability following Laylo */
                padding: 0; /* Clean alignment */
                text-align: center; /* Center on mobile for consistency */
                margin-bottom: 16px; /* Reduced from 32px (50% reduction) */
            }
        }

        @media screen and (max-width: 480px) {
            .drop-sub-header {
                margin-top: 8px; /* Reduced from 16px (50% reduction) */
            }

            .drop-sub-header-title {
                font-size: 1.375rem; /* Still prominent on small screens */
                padding: 0 6px; /* Reduced from 12px (50% reduction) */
                margin-bottom: 4px; /* Reduced from 8px (50% reduction) */
            }

            .drop-sub-header-content {
                font-size: 0.9rem;
                padding: 0 6px; /* Reduced from 12px (50% reduction) */
                text-align: left;
            }
        }

        /* Tablet responsive improvements - Compact spacing (50% reduction) */
        @media screen and (min-width: 768px) and (max-width: 1023px) {
            .drop-sub-header-title {
                font-size: 2rem; /* Larger on tablet */
                margin-bottom: 10px; /* Reduced from 20px (50% reduction) */
            }

            .drop-sub-header-content {
                font-size: 1.125rem; /* Better tablet readability */
            }
        }

        /* Desktop responsive improvements - Compact spacing (50% reduction) */
        @media screen and (min-width: 1024px) {
            .drop-sub-header-title {
                font-size: 2.25rem; /* Maximum impact on desktop */
                margin-bottom: 12px; /* Reduced from 24px (50% reduction) */
            }

            .drop-sub-header-content {
                font-size: 1.25rem; /* Premium desktop readability */
            }
        }

        /* Phone Input Field - Fixed for Country Select */
        .phone-input-field {
            width: 100%;
            background-color: transparent;
            border: none;
            outline: none;
            color: white;
            font-family: "Inter", sans-serif;
            font-weight: 400;
            font-size: 1.125rem;
            line-height: 1.5;
            letter-spacing: 0.00938em;
            padding: 16px 90px 16px 70px; /* Reduced left padding for smaller country selector */
            height: 100%;
            box-sizing: border-box;
        }

        /* Mobile font-size fix to prevent zoom */
        @media screen and (max-width: 767px) {
            .phone-input-field,
            .email-input-field {
                font-size: 16px !important;
            }
        }

        .phone-input-field::placeholder {
            color: rgba(255, 255, 255, 0.7);
            opacity: 1;
        }

        .phone-input-field:focus {
            outline: none;
        }

        /* Form Stability Enhancements */
        .laylo-rsvp-card form {
            position: relative;
            width: 100%;
        }

        .phone-input-container * {
            box-sizing: border-box;
        }

        /* Prevent layout shifts */
        .laylo-message {
            min-height: 20px;
            transition: all 0.3s ease;
        }

        .laylo-message.hidden {
            min-height: 0;
            padding: 0;
            margin: 0;
            overflow: hidden;
        }

        /* RSVP Submit Button - Dynamic Colors from Database */
        .laylo-rsvp-button {
            position: absolute;
            right: 6px;
            top: 50%;
            transform: translateY(-50%);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            background-color: {{#if drop.button_color}}{{drop.button_color}}{{else}}#000000{{/if}} !important;
            background: {{#if drop.button_color}}{{drop.button_color}}{{else}}#000000{{/if}} !important;
            /* Debug: Button color value = {{drop.button_color}} */
            outline: 0;
            border: 0;
            margin: 0;
            padding: 12px 24px; /* Enhanced padding following Laylo pattern */
            cursor: pointer;
            user-select: none;
            vertical-align: middle;
            appearance: none;
            text-decoration: none;
            font-family: "Inter", sans-serif;
            font-weight: 600; /* Bolder weight like Laylo */
            font-size: 0.875rem;
            line-height: 1.2;
            letter-spacing: 0.01em; /* Subtle letter-spacing */
            text-transform: uppercase;
            min-width: 80px; /* Slightly wider for better presence */
            height: 44px;
            border-radius: 22px; /* Rounded like Laylo button */
            transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
            color: {{#if drop.button_text_color}}{{drop.button_text_color}}{{else}}#ffffff{{/if}};
            /* Dynamic shadow that works with any button color */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .laylo-rsvp-button:hover {
            text-decoration: none;
            background-color: {{#if drop.button_color}}{{drop.button_color}}{{else}}#333333{{/if}} !important;
            background: {{#if drop.button_color}}{{drop.button_color}}{{else}}#333333{{/if}} !important;
            transform: translateY(-50%) scale(1.02);
            /* Enhanced shadow on hover */
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2), 0 4px 8px rgba(0, 0, 0, 0.15);
            opacity: 0.9; /* Subtle hover effect using opacity */
        }

        .laylo-rsvp-button:active {
            transform: translateY(-50%) scale(0.98);
            background-color: {{#if drop.button_color}}{{drop.button_color}}{{else}}#333333{{/if}} !important;
            background: {{#if drop.button_color}}{{drop.button_color}}{{else}}#333333{{/if}} !important;
            /* Reduced shadow on active */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1);
            opacity: 0.8; /* Stronger active effect using opacity */
        }

        .laylo-rsvp-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: translateY(-50%);
            filter: none;
        }

        .laylo-rsvp-button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
        }

        /* Standalone Button for Email-Only Mode - Dynamic Colors from Database */
        .laylo-rsvp-button.standalone {
            position: static;
            transform: none;
            width: 100%;
            margin-top: 24px; /* Enhanced spacing following Laylo pattern */
            height: 56px;
            border-radius: 28px; /* Rounded like Laylo button */
            font-size: 1rem;
            font-weight: 600;
            min-width: auto;
            padding: 16px 24px;
            background-color: {{#if drop.button_color}}{{drop.button_color}}{{else}}#000000{{/if}} !important;
            background: {{#if drop.button_color}}{{drop.button_color}}{{else}}#000000{{/if}} !important;
            color: {{#if drop.button_text_color}}{{drop.button_text_color}}{{else}}#ffffff{{/if}} !important;
            /* Dynamic shadow that works with any button color */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
            letter-spacing: 0.01em; /* Subtle letter-spacing */
        }

        .laylo-rsvp-button.standalone:hover {
            transform: scale(1.02);
            background-color: {{#if drop.button_color}}{{drop.button_color}}{{else}}#333333{{/if}} !important;
            background: {{#if drop.button_color}}{{drop.button_color}}{{else}}#333333{{/if}} !important;
            /* Enhanced shadow on hover */
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2), 0 4px 8px rgba(0, 0, 0, 0.15);
            opacity: 0.9; /* Subtle hover effect using opacity */
        }

        .laylo-rsvp-button.standalone:active {
            transform: scale(0.98);
            background-color: {{#if drop.button_color}}{{drop.button_color}}{{else}}#333333{{/if}} !important;
            background: {{#if drop.button_color}}{{drop.button_color}}{{else}}#333333{{/if}} !important;
            /* Reduced shadow on active */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1);
            opacity: 0.8; /* Stronger active effect using opacity */
        }

        .laylo-rsvp-button.standalone:disabled {
            transform: none;
        }

        /* Form Footer - Justified Text Alignment */
        .laylo-form-footer {
            font-family: "Inter", sans-serif;
            font-weight: 400;
            font-size: 0.75rem; /* Base size for mobile */
            line-height: 1.57;
            letter-spacing: 0.00714em;
            {{#if (eq drop.card_background_type "solid_white")}}
            color: #666666;
            {{else}}
            color: var(--laylo-text-secondary);
            {{/if}}
            margin: 0;
            text-align: justify;
            margin-top: 12.5px;
            text-justify: inter-word;
        }

        /* Mobile Optimized Form Footer - More readable sizing */
        @media (max-width: 767px) {
            .laylo-form-footer {
                font-size: 0.625rem; /* Reduced but still readable (was 0.75rem) */
                line-height: 1.3; /* Tighter but readable (was 1.57) */
                margin-top: 8px; /* Slightly reduced margin */
                letter-spacing: 0.005em; /* Adjusted for smaller text */
            }
        }

        /* Tablet Form Footer - Scaled down appropriately */
        @media (min-width: 768px) and (max-width: 1023px) {
            .laylo-form-footer {
                font-size: 0.6rem; /* Smaller for tablet */
                line-height: 1.4;
                margin-top: 10px;
                letter-spacing: 0.004em;
            }
        }

        /* Desktop Form Footer - Smallest for large screens */
        @media (min-width: 1024px) {
            .laylo-form-footer {
                font-size: 0.55rem; /* Smallest for desktop */
                line-height: 1.45;
                margin-top: 10px;
                letter-spacing: 0.003em;
            }
        }

        .laylo-form-footer a {
            color: inherit;
            text-decoration: underline;
            text-decoration-color: currentcolor;
        }

        .laylo-form-footer a:hover {
            text-decoration: none;
        }

        /* B2B Branding - Dynamic Color Adaptation System */
        /*
         * IMPLEMENTATION: Logo color automatically adapts based on card background type
         * - White/Light cards (solid_white): Dark logo (#666666) for contrast
         * - Dark/Colored cards (all others): Light logo (var(--laylo-text-secondary))
         * - Colors exactly match .laylo-form-footer disclaimer text
         * - Supports dark theme with enhanced contrast ratios
         * - Maintains accessibility and visual consistency
         */
        .b2b-branding {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            padding: 8px 0;
            /* Removed all button-like styling: no background, borders, or hover effects */
        }



        .b2b-branding-link {
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: rgba(255, 255, 255, 0.6);
            transition: color 0.2s ease;
            /* Removed all button-like styling: no padding, background, or border-radius */
        }

        .b2b-branding-link:hover {
            color: rgba(255, 255, 255, 0.8);
            /* Only subtle color change on hover, no background or transform effects */
        }

        .b2b-logo {
            width: 160px;
            height: auto;
            max-width: 100%;
            transition: opacity 0.2s ease, color 0.2s ease;
            /* DYNAMIC COLOR: Exactly match disclaimer text color for perfect visual consistency */
            {{#if (eq drop.card_background_type "solid_white")}}
            color: #666666 !important; /* Dark logo on white/light backgrounds */
            opacity: 1;
            {{else}}
            color: var(--laylo-text-secondary) !important; /* Light logo on dark/colored backgrounds */
            opacity: 0.8;
            {{/if}}
            /* Ensure SVG inherits the color properly */
            fill: currentColor;
        }

        .b2b-branding-link:hover .b2b-logo {
            {{#if (eq drop.card_background_type "solid_white")}}
            opacity: 0.8; /* Subtle fade on white backgrounds */
            color: #666666 !important; /* Maintain dark color */
            {{else}}
            opacity: 1; /* Full visibility on dark backgrounds */
            color: var(--laylo-text-secondary) !important; /* Maintain light color */
            {{/if}}
            /* Smooth transitions for optimal user experience */
        }

        /* Logo path styling for better readability */
        .b2b-logo path {
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
        }

        /* Dark theme adjustments - enhanced logo color adaptation */
        @media (prefers-color-scheme: dark) {
            .b2b-branding-link {
                color: rgba(255, 255, 255, 0.5);
            }

            .b2b-branding-link:hover {
                color: rgba(255, 255, 255, 0.7);
            }

            /* Override dynamic colors for dark theme preference */
            .b2b-logo {
                {{#if (eq drop.card_background_type "solid_white")}}
                color: #333333 !important; /* Darker on white cards in dark theme */
                {{else}}
                color: rgba(255, 255, 255, 0.8) !important; /* Light on dark cards */
                {{/if}}
            }

            .b2b-branding-link:hover .b2b-logo {
                {{#if (eq drop.card_background_type "solid_white")}}
                color: #333333 !important; /* Maintain dark color on hover */
                opacity: 0.7;
                {{else}}
                color: rgba(255, 255, 255, 1) !important; /* Full white on hover */
                opacity: 1;
                {{/if}}
            }
        }

        /* Mobile Responsive Design - Optimized B2B Branding */
        @media (max-width: 767px) {
            .b2b-branding {
                justify-content: center; /* Keep centered positioning */
                margin-top: 12px; /* Reduced top margin */
                padding: 4px 0 6px 0; /* Reduced bottom padding for tighter spacing */
            }

            .b2b-logo {
                width: 80px; /* 50% of 160px - reduced to 50% of original size */
            }

            /* Mobile background optimization */
            .drop-page-container {
                background-attachment: scroll !important;
                min-height: 100dvh;
            }
        }

        /* Tablet Responsive Design */
        @media (min-width: 768px) and (max-width: 1023px) {
            .b2b-branding {
                margin-top: 18px;
                padding: 7px 0;
            }

            .b2b-logo {
                width: 140px;
            }
        }

        /* Desktop Responsive Design */
        @media (min-width: 1024px) {
            .b2b-branding {
                margin-top: 20px;
                padding: 8px 0;
            }

            .b2b-logo {
                width: 160px;
            }
        }

        /* Large Desktop */
        @media (min-width: 1440px) {
            .b2b-logo {
                width: 180px;
            }
        }

        /* Enhanced Success/Error Messages - Modern UX Design */
        .laylo-message {
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 16px;
            text-align: left;
            font-weight: 500;
            font-family: "Inter", sans-serif;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid transparent;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(0);
            opacity: 1;
        }

        .laylo-message.hidden {
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
        }

        .laylo-message:not(.hidden) {
            animation: slideInFade 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideInFade {
            0% {
                opacity: 0;
                transform: translateY(-10px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .laylo-success {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            border-color: #059669;
        }

        .laylo-error {
            background: linear-gradient(135deg, #FEF2F2 0%, #FEE2E2 100%);
            color: #DC2626;
            border-color: #FECACA;
            {{#if (eq drop.card_background_type "solid_white")}}
            background: linear-gradient(135deg, #FEF2F2 0%, #FEE2E2 100%);
            {{else}}
            background: linear-gradient(135deg, rgba(254, 242, 242, 0.95) 0%, rgba(254, 226, 226, 0.95) 100%);
            backdrop-filter: blur(8px);
            {{/if}}
        }

        .laylo-message-icon {
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .laylo-message-content {
            flex: 1;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        .laylo-message-title {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .laylo-message-text {
            font-weight: 400;
            opacity: 0.9;
        }

        /* Mobile Error Message Optimizations */
        @media screen and (max-width: 767px) {
            .laylo-message {
                padding: 14px 16px;
                font-size: 16px; /* Prevent zoom on mobile */
                margin-bottom: 12px;
                border-radius: 10px;
            }

            .laylo-message-content {
                font-size: 16px; /* Prevent zoom on mobile */
            }

            .laylo-message-icon {
                width: 18px;
                height: 18px;
            }
        }

        @media screen and (max-width: 374px) {
            .laylo-message {
                padding: 12px 14px;
                gap: 10px;
            }

            .laylo-message-icon {
                width: 16px;
                height: 16px;
            }
        }

        /* Industry-Leading Responsive Design System */

        /* Large Desktop: 1920px+ */
        @media only screen and (min-width: 1920px) {
            .drop-page-container {
                padding: clamp(60px, 12vh, 120px) clamp(200px, 15vw, 300px) 24px;
            }

            .drop-container {
                max-width: 1600px;
            }
        }

        /* Desktop: 1440px - 1919px */
        @media only screen and (max-width: 1919px) and (min-width: 1440px) {
            .drop-page-container {
                padding: clamp(40px, 10vh, 100px) clamp(120px, 12vw, 200px) 24px;
            }
        }

        /* Medium Desktop: 1024px - 1439px - Refined spacing for tight connection */
        @media only screen and (max-width: 1439px) and (min-width: 1024px) {
            .drop-page-container {
                padding: clamp(32px, 8vh, 80px) clamp(80px, 10vw, 150px) 24px;
            }

            .drop-container {
                grid-template-columns: 1fr 380px; /* Slightly smaller right column */
                gap: 0px 32px; /* Eliminated row gap completely for tighter spacing */
            }

            .drop-title-section {
                max-width: 380px !important;
            }

            .rsvp-container {
                width: 380px !important;
                max-width: 380px !important;
                min-width: 380px !important;
            }

            .rsvp-card-container {
                width: 380px !important;
                min-width: 380px !important;
                max-width: 380px !important;
            }

            .drop-title {
                font-size: 50px !important;
                line-height: 1.0 !important; /* Tight but readable line-height */
                letter-spacing: -0.4px !important;
                margin: 0 0 10px 0 !important; /* Reduced bottom spacing when subtitle present */
            }

            .drop-subtitle {
                font-size: 30px !important; /* 60% of title size (50px * 0.6 = 30px) */
                text-align: left !important; /* Left-aligned to match title */
                margin: 8px 0 20px 0 !important; /* Spacing: 8px from title, 20px to form */
                line-height: 1.2 !important;
                letter-spacing: -0.02em !important;
            }

            .rsvp-container {
                margin: 14px 0 0 0 !important; /* Reduced from 28px to 14px (50% reduction) */
            }

            .laylo-rsvp-card {
                padding: 28px 32px 40px 32px !important; /* Restore internal padding */
            }
        }

        /* Large Tablet: 900px - 1023px - Side-by-side layout */
        @media only screen and (max-width: 1023px) and (min-width: 900px) {
            .drop-page-container {
                padding: clamp(24px, 6vh, 60px) clamp(32px, 6vw, 64px) 24px;
            }

            .drop-container {
                grid-template-columns: 1fr 350px; /* Side-by-side with smaller right column */
                grid-template-rows: auto 1fr; /* Title takes needed space, form takes remaining space */
                grid-template-areas:
                    "image title"
                    "image form";
                gap: 0px 24px; /* Eliminated row gap completely for tighter spacing */
                align-items: start;
                padding: 0 16px;
            }

            .drop-image-container {
                max-width: min(450px, 55vw);
            }

            .drop-title-section {
                max-width: 350px;
                text-align: left;
            }

            .rsvp-container {
                width: 350px !important;
                max-width: 350px !important;
                min-width: 350px !important;
                margin: 12px 0 0 0 !important; /* Reduced from 24px to 12px (50% reduction) */
            }

            .rsvp-card-container {
                width: 350px !important;
                max-width: 350px !important;
                min-width: 350px !important;
            }

            .drop-title {
                font-size: clamp(36px, 5vw, 44px) !important;
                line-height: 1.0 !important; /* Tight but readable line-height */
                letter-spacing: -0.3px !important;
                margin: 0 0 8px 0 !important; /* Reduced bottom spacing when subtitle present */
            }

            .drop-subtitle {
                font-size: clamp(22px, 3vw, 28px) !important; /* 60-65% of title size */
                text-align: left !important; /* Left-aligned to match title */
                margin: 6px 0 16px 0 !important; /* Spacing: 6px from title, 16px to form */
                line-height: 1.25 !important;
                letter-spacing: -0.02em !important;
            }

            .laylo-rsvp-card {
                padding: 24px 32px 40px 32px !important; /* Restore internal padding */
            }
        }

        /* Small Tablet: 768px - 899px - Reduced spacing for smoother transition */
        @media only screen and (max-width: 899px) and (min-width: 768px) {
            .drop-page-container {
                padding: clamp(20px, 4vh, 40px) clamp(24px, 5vw, 48px) 20px; /* Reduced from excessive padding */
            }

            .drop-container {
                grid-template-columns: 1fr;
                gap: clamp(4px, 1vw, 8px); /* Reduced from 8px-16px to 4px-8px (50% reduction) */
                text-align: center;
            }

            .drop-image-container {
                grid-column: 1;
                max-width: min(500px, 80vw);
                margin: 0 auto;
            }

            .drop-title-section {
                grid-column: 1;
                margin: 0 auto 8px auto; /* Reduced from 16px to 8px */
                padding: 4px 16px 6px 16px; /* Reduced section padding */
                overflow: visible !important; /* Prevent overflow issues */
            }

            .rsvp-container {
                grid-column: 1;
                width: 100% !important;
                max-width: 90vw !important;
                min-width: auto !important;
                margin: 0 auto;
                padding-bottom: 16px; /* Reduced from 24px */
            }

            .drop-title {
                font-size: clamp(40px, 6vw, 48px) !important; /* Increased from 32px-40px to 40px-48px */
                line-height: 1.1 !important;
                letter-spacing: -0.4px !important;
                margin: 6px 0 4px 0 !important; /* Reduced bottom spacing when subtitle present */
            }

            .drop-subtitle {
                font-size: clamp(24px, 4vw, 30px) !important; /* 60-65% of title size */
                text-align: center !important; /* Center-aligned on tablet */
                margin: 4px 0 8px 0 !important; /* Minimal spacing for compact layout */
                line-height: 1.3 !important;
                letter-spacing: -0.02em !important;
            }

            .user-container {
                justify-content: center !important;
                width: 100% !important;
                max-width: 100% !important;
                margin-bottom: 24px !important;
                gap: 12px !important;
            }

            .rsvp-card-container {
                width: 100% !important;
                min-width: auto !important;
                max-width: 100% !important;
            }
        }

        /* Mobile Large: 375px - 767px - Updated for new layout */
        @media only screen and (max-width: 767px) and (min-width: 375px) {
            .drop-page-container {
                padding: clamp(16px, 4vh, 40px) clamp(12px, 3vw, 20px) 24px; /* Reduced bottom padding from 60px to 24px */
            }

            .drop-container {
                gap: 2px; /* Reduced from 4px to 2px (50% reduction) */
            }

            .drop-image-container {
                margin: 0 auto !important;
                max-width: 100% !important;
                justify-content: center !important;
            }

            .drop-title-section {
                margin: 0 auto 4px auto !important; /* Reduced from 8px to 4px (50% reduction) */
                padding: 6px 16px 10px 16px !important; /* Enhanced section padding */
                overflow: visible !important; /* Prevent overflow issues */
            }

            .drop-title {
                font-size: clamp(32px, 7vw, 42px) !important; /* Increased from 28px-36px to 32px-42px */
                line-height: 1.15 !important;
                letter-spacing: -0.3px !important;
                margin: 10px 0 6px 0 !important; /* Reduced bottom spacing when subtitle present */
            }

            .drop-subtitle {
                font-size: clamp(20px, 4.5vw, 26px) !important; /* 60-65% of title size */
                text-align: center !important; /* Center-aligned on mobile */
                margin: 4px 0 12px 0 !important; /* Minimal spacing for mobile layout */
                line-height: 1.3 !important;
                letter-spacing: -0.01em !important;
            }

            .user-container {
                justify-content: center !important;
                text-align: center !important;
                margin-bottom: 20px !important;
                gap: 12px !important;
            }

            .username {
                text-align: center !important;
            }

            /* Mobile form optimizations */
            .phone-input-container {
                height: 52px;
                padding: 10px 14px;
            }

            .laylo-rsvp-button {
                height: 40px;
                padding: 8px 16px;
                font-size: 0.8rem;
                min-width: 60px;
            }

            .phone-input-field {
                padding: 12px 75px 12px 60px; /* Reduced left padding for smaller country selector */
                font-size: 16px; /* Keep 16px for zoom prevention */
                min-height: 44px; /* PRIORITY 4: iOS minimum touch target */
            }

            /* PRIORITY 4: Enhanced mobile country selector UX */
            .country-select {
                font-size: 16px; /* Prevent zoom on iOS */
                min-height: 44px; /* iOS minimum touch target */
            }

            .country-flag-display {
                min-width: 24px; /* Ensure flag visibility on mobile */
                min-height: 18px;
            }
        }

        /* Mobile Small: 320px - 374px - Updated for new layout */
        @media only screen and (max-width: 374px) {
            .drop-page-container {
                padding: 16px 8px 20px; /* Reduced bottom padding from 50px to 20px */
            }

            .drop-container {
                gap: 1px; /* Reduced from 2px to 1px (50% reduction) */
            }

            .drop-image-container {
                margin: 0 auto !important;
                max-width: 100% !important;
                justify-content: center !important;
            }

            .drop-title-section {
                margin: 0 auto 3px auto !important; /* Reduced from 6px to 3px (50% reduction) */
                padding: 4px 8px 8px 8px !important; /* Enhanced section padding */
                overflow: visible !important; /* Prevent overflow issues */
            }

            .drop-title {
                font-size: clamp(28px, 6.5vw, 36px) !important; /* Increased from 24px-30px to 28px-36px */
                line-height: 1.2 !important;
                letter-spacing: -0.2px !important;
                margin: 8px 0 4px 0 !important; /* Reduced bottom spacing when subtitle present */
            }

            .drop-subtitle {
                font-size: clamp(18px, 4vw, 22px) !important; /* 60-65% of title size */
                text-align: center !important; /* Center-aligned on small mobile */
                margin: 3px 0 10px 0 !important; /* Minimal spacing for compact mobile layout */
                line-height: 1.35 !important;
                letter-spacing: 0 !important;
            }

            .user-container {
                justify-content: center !important;
                text-align: center !important;
                margin-bottom: 16px !important;
                gap: 10px !important;
            }

            .username {
                text-align: center !important;
            }

            .laylo-rsvp-card {
                padding: 32px 24px; /* Enhanced mobile padding following Laylo pattern */
                border-radius: 16px; /* Slightly smaller radius on mobile */
            }

            .phone-input-container {
                height: 48px;
                padding: 8px 12px;
            }

            .laylo-rsvp-button {
                height: 36px;
                padding: 6px 12px;
                font-size: 0.75rem;
                min-width: 55px;
            }

            .phone-input-field {
                padding: 10px 65px 10px 55px; /* Reduced left padding for smaller country selector */
                font-size: 16px; /* Keep 16px for zoom prevention */
                min-height: 44px; /* PRIORITY 4: iOS minimum touch target */
            }

            /* PRIORITY 4: Enhanced small mobile country selector */
            .country-select {
                font-size: 16px; /* Prevent zoom on iOS */
                min-height: 44px; /* iOS minimum touch target */
            }

            /* Smaller country selector for small screens */
            .phone-country-select {
                left: 4px;
                width: 44px; /* Even smaller on small screens */
            }

            .country-select-wrapper {
                height: 20px;
                padding: 1px;
                width: 40px; /* Very compact for small screens */
            }

            .country-select {
                padding: 1px 8px 1px 16px;
                width: 36px;
                height: 16px;
                font-size: 14px;
            }

            .country-flag-display {
                left: 4px;
            }

            .country-flag-display img {
                width: 16px;
                height: 12px;
                margin-right: 2px;
            }

            /* Small mobile B2B branding optimizations */
            .b2b-branding {
                margin-top: 8px; /* Even smaller top margin */
                padding: 2px 0 4px 0; /* Very tight padding */
            }

            .b2b-logo {
                width: 60px; /* Even smaller for small screens */
            }

            .laylo-form-footer {
                font-size: 0.5rem; /* Slightly larger than 767px breakpoint for readability */
                line-height: 1.2; /* Better readability on small screens */
            }
        }

        /* Utility Classes */
        .hidden {
            display: none;
        }

        .visually-hidden {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            padding: 0 !important;
            margin: -1px !important;
            overflow: hidden !important;
            clip: rect(0, 0, 0, 0) !important;
            white-space: nowrap !important;
            border: 0 !important;
        }

        /* Removed duplicate background system to prevent layering issues */

        /* Ensure proper stacking and eliminate white background artifacts */
        .drop-container {
            position: relative;
            z-index: 1;
            background: transparent !important;
        }

        /* Force transparent backgrounds on all elements to prevent white artifacts */
        .drop-image-container,
        .rsvp-container,
        .rsvp-card-container,
        .user-container,
        .avatar,
        .avatar div {
            background: transparent !important;
        }

        /* Ensure body and html have no background */
        body::before,
        body::after,
        html::before,
        html::after {
            display: none !important;
        }
    </style>
</head>
<body style="font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
    <div class="drop-page-container">
        <div class="drop-container">
            <!-- Image Container - Laylo Style Large Image -->
            <div class="drop-image-container">
                {{#if drop.cover_image}}
                <img src="{{drop.cover_image}}" alt="{{drop.title}}" />
                {{/if}}
            </div>

            <!-- Title Section - With Optional Subtitle -->
            <div class="drop-title-section">
                <!-- Main Title -->
                <h1 class="drop-title">{{drop.title}}</h1>
                <!-- Optional Subtitle -->
                {{#if drop.subtitle}}
                <h2 class="drop-subtitle">{{drop.subtitle}}</h2>
                {{/if}}
            </div>

            <!-- RSVP Container - Now positioned lower like Laylo -->
            <div class="rsvp-container">

                <!-- RSVP Card Container -->
                <div class="rsvp-card-container">
                    <div class="laylo-rsvp-card">
                        <!-- Success/Error Messages -->
                        <div id="success-message" class="laylo-message laylo-success hidden">
                            <div class="laylo-message-icon">
                                <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <div class="laylo-message-content">
                                <div class="laylo-message-title">Success!</div>
                                <div class="laylo-message-text" id="success-text">Thank you! You're on the list.</div>
                            </div>
                        </div>
                        <div id="error-message" class="laylo-message laylo-error hidden">
                            <div class="laylo-message-icon">
                                <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <div class="laylo-message-content">
                                <div class="laylo-message-title" id="error-title">Oops!</div>
                                <div class="laylo-message-text" id="error-text">Something went wrong. Please try again.</div>
                            </div>
                        </div>

                        <!-- Card Title -->
                        <h3 class="laylo-card-title">Get notified</h3>

                        <!-- Dynamic Form Based on Collection Settings -->
                        <form id="drop-signup-form">
                            {{#if drop.collect_email}}
                            <!-- Email Input Field -->
                            <div class="email-input-container">
                                <input
                                    type="email"
                                    name="email"
                                    placeholder="your@email.com"
                                    class="email-input-field"
                                    value=""
                                    autocomplete="email"
                                    {{#if drop.collect_email}}required{{/if}}
                                />
                            </div>
                            {{/if}}

                            {{#if drop.collect_phone}}
                            <!-- Phone Input Container with Conditional Inlaid Button -->
                            <div class="phone-input-container">
                                <!-- Native Country Select -->
                                <div class="phone-country-select">
                                    <div class="country-select-wrapper">
                                        <div class="country-flag-display" id="country-flag-display">
                                            <img alt="United States" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjQjIyMjM0Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCAwSDIxVjFIMFYwWk0wIDJIMjFWM0gwVjJaTTAgNEgyMVY1SDBWNFpNMCA2SDIxVjdIMFY2Wk0wIDhIMjFWOUgwVjhaTTAgMTBIMjFWMTFIMFYxMFpNMCAxMkgyMVYxM0gwVjEyWiIgZmlsbD0id2hpdGUiLz4KPHJlY3Qgd2lkdGg9IjkiIGhlaWdodD0iOCIgZmlsbD0iIzNDM0I2RSIvPgo8L3N2Zz4K" />
                                        </div>
                                        <select class="country-select" id="country-select" name="country_code" aria-label="Select country code">
                                            <!-- PRIORITY 2: Enhanced Country Support with Full Names -->
                                            <option value="+1" data-country="US" data-name="United States">US +1 United States</option>
                                            <option value="+44" data-country="GB" data-name="United Kingdom">GB +44 United Kingdom</option>
                                            <option value="+1" data-country="CA" data-name="Canada">CA +1 Canada</option>
                                            <option value="+61" data-country="AU" data-name="Australia">AU +61 Australia</option>
                                            <option value="+49" data-country="DE" data-name="Germany">DE +49 Germany</option>
                                            <option value="+33" data-country="FR" data-name="France">FR +33 France</option>
                                            <option value="+34" data-country="ES" data-name="Spain">ES +34 Spain</option>
                                            <option value="+39" data-country="IT" data-name="Italy">IT +39 Italy</option>
                                            <option value="+81" data-country="JP" data-name="Japan">JP +81 Japan</option>
                                            <option value="+82" data-country="KR" data-name="South Korea">KR +82 South Korea</option>
                                            <option value="+55" data-country="BR" data-name="Brazil">BR +55 Brazil</option>
                                            <option value="+52" data-country="MX" data-name="Mexico">MX +52 Mexico</option>
                                            <option value="+91" data-country="IN" data-name="India">IN +91 India</option>
                                            <option value="+86" data-country="CN" data-name="China">CN +86 China</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- PRIORITY 3: International Phone Input Field -->
                                <input
                                    type="tel"
                                    name="phone"
                                    placeholder="(555) 123-4567"
                                    class="phone-input-field"
                                    value=""
                                    maxlength="20"
                                    autocomplete="tel"
                                    aria-label="Phone number"
                                    {{#if drop.collect_phone}}required{{/if}}
                                />

                                {{#if (and drop.collect_phone (not drop.collect_email))}}
                                <!-- Inlaid Button for Phone-Only Mode -->
                                <button type="submit" class="laylo-rsvp-button inlaid" name="rsvp" alt="Confirm RSVP" title="Confirm RSVP">
                                    {{#if drop.button_text}}{{drop.button_text}}{{else}}RSVP{{/if}}
                                </button>
                                {{else if (and drop.collect_phone drop.collect_email)}}
                                <!-- Inlaid Button for Both Fields Mode -->
                                <button type="submit" class="laylo-rsvp-button inlaid" name="rsvp" alt="Confirm RSVP" title="Confirm RSVP">
                                    {{#if drop.button_text}}{{drop.button_text}}{{else}}RSVP{{/if}}
                                </button>
                                {{/if}}
                            </div>
                            {{/if}}

                            {{#if (and drop.collect_email (not drop.collect_phone))}}
                            <!-- Standalone Button for Email-Only Mode -->
                            <button type="submit" class="laylo-rsvp-button standalone" name="rsvp" alt="Confirm RSVP" title="Confirm RSVP">
                                {{#if drop.button_text}}{{drop.button_text}}{{else}}RSVP{{/if}}
                            </button>
                            {{/if}}
                        </form>

                        <!-- Form Footer -->
                        <div class="laylo-form-footer">
                            This site is protected by reCaptcha. By submitting my information, I agree to receive recurring automated messages to the contact information provided and to Bounce2Bounce's <a href="https://terms.bounce2bounce.com" target="_blank">Terms of Service</a>, <a href="https://terms.bounce2bounce.com" target="_blank">Cookie Policy</a> and <a href="https://terms.bounce2bounce.com" target="_blank">Privacy Policy</a>. Msg & Data Rates may apply. Reply STOP to cancel, HELP for help.
                        </div>

                        <!-- B2B Branding -->
                        <div class="b2b-branding">
                            <a href="https://bounce2bounce.com" target="_blank" class="b2b-branding-link">
                                <svg class="b2b-logo" viewBox="0 0 3784.75 1161.8" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M162.87,658.37c39.48.14,79.1-.14,118.58,0,0,41.61-9.47,60.49-25.25,102.1,80.41-45.97,220.81-67.25,274.26,7.28,40.36,48.32-28.97,173.84-65.7,228.53-28.63,42.97-51.43,72.73-93.37,95.25-69.33,37.1-199.33,35.47-247.04-20.71-2.88,14.1-4.83,28.19-5.64,42.29-39.57.13-79.15.27-118.72.4,9.13-159.43,162.87-295.71,162.87-455.14ZM189.97,891.75c-8.96,17.92-17.84,35.84-26.21,53.77,2.2,52.05,40.5,47.39,91.53,50.17,66.96,2.17,113.65-43.58,134.33-106.01,6.04-16.18,6.61-30.36-1.82-43.78-11.87-12.79-31.76-12.32-48.48-12.6-69.37-.05-118.88,19.43-149.34,58.45ZM830.6,718.26c75.06-1.62,181.75,17.46,163.81,114.56-18.44,83.93-78.18,190.32-147.47,240.35-75.25,53.79-247.76,62.61-318.22.22-64.06-64.91,9.31-178.01,54.84-239.18,60.76-81.27,148.31-118.45,247.05-115.95ZM708.51,1005.11c64.54-.84,101.27-27.47,130.75-87.79,12.3-26.42,21.59-53.38,2.59-72.13-21.36-17.63-49.74-18.5-76.83-13.89-31.84,6.27-61.51,22.69-83.67,48.61-42.97,50.77-64.03,128.87,27.15,125.2ZM1384.85,720.64c39.48.09,78.97.19,118.45.28-36.1,129.34-141.44,258.68-148.84,388.02-39.57.13-79.15.27-118.72.4,1.14-19.88,4.59-39.76,9.74-59.65-39.81,39.39-82.51,59.22-139.6,59.41-77.41-2.33-141.29-9.57-145.58-92.33,3.39-97.12,72.42-177.95,107.37-296.9,39.32.09,78.63.19,117.95.28-13.64,50.37-42.12,107.42-65.83,155.77-8.9,20.05-21.79,47.98-18.48,70.82,1.32,16.83,10.2,22.12,25.24,28.47,58.68,15.08,105.33-9.6,171.09-56.43,32.3-66.05,68.76-132.11,87.2-198.16ZM1887.14,800.5c-13.33,95.98-90.05,176.17-100.98,306.98-39.57.13-79.15.27-118.72.4,2.5-49.93,22.38-105.22,44.15-152.65,9.88-23.12,24.14-53.69,24.99-79.15.38-28.53-18.88-38.32-46.01-38.29-46.39-.09-75.35,18.8-112.07,47.28-37.28,74.46-74.07,148.92-78.34,223.38-39.57.13-79.14.27-118.72.4,7.4-129.29,112.7-258.58,148.78-387.86,39.48.09,78.97.19,118.45.28-4.98,17.83-11.27,35.66-18.45,53.5,36.55-24.3,61.45-42.87,103.21-52.63,59.32-9.89,166.18-8.29,153.7,78.36ZM2161.64,721.47c93.02-2.34,214.33,34.77,159.5,145.62-43.45,7.68-86.94,15.38-130.42,23.1,12.23-67.21-110.77-54.77-146.27-33.1-23.92,13.73-41.48,34.6-52.99,58.96-28.91,54.87.36,78.59,57.67,77.36,43.81.32,90.72-13.33,116.2-49.05,36.01,7.01,72.12,14.01,108.33,20.99-55.21,133.9-209.3,165.79-339.94,136.19-98.16-23.82-105.76-104.75-63-184.77,63.8-120.73,149.21-196.24,290.92-195.31ZM330.42,159.13c39.4.14,78.81.28,118.21.42,0,41.51-10.66,83.03-26.54,124.54,80.29-45.79,220.48-67.19,273.73,7.26,40.13,48.2-29.5,173.45-66.04,228-28.52,42.84-51.1,72.54-92.87,95.04-69.24,37.13-198.88,35.27-246.7-20.66-2.81,14.06-4.67,28.13-5.36,42.19-39.5.13-79,.27-118.5.4,7.89-159.06,164.06-318.13,164.06-477.19ZM360.11,416.79c-9,17.92-17.9,35.84-26.25,53.76,2.28,52.03,40.64,47.39,91.67,50.17,66.98,2.18,113.44-43.64,134.23-106,6.07-16.16,6.71-30.34-1.68-43.78-11.84-12.8-31.72-12.31-48.43-12.59-69.36-.05-118.99,19.42-149.55,58.45ZM999.38,241.88c74.99-1.64,181.75,17.46,163.44,114.55-18.77,83.73-78.36,190.14-147.36,240.33-75.9,59.79-343.04,73.77-343.69-61.25-1.34-52.36,44.71-134.69,80.19-177.69,61.01-81.19,148.58-118.44,247.42-115.95ZM876.7,528.71c64.57-.84,101.16-27.48,130.74-87.79,12.33-26.4,21.73-53.33,2.79-72.13-21.32-17.64-49.71-18.49-76.78-13.88-31.88,6.28-61.6,22.69-83.83,48.61-43.13,50.74-64.16,128.86,27.08,125.19ZM1554.98,245.22c38.91.09,77.81.18,116.72.28-36.7,129.19-142.79,258.38-148.5,387.56-38.99.13-77.98.27-116.97.4.88-19.86,4.12-39.72,9.12-59.58-39.44,39.35-81.77,59.16-138.78,59.35-77.31-2.32-141.41-9.6-146.14-92.22,3-97.14,72.42-177.79,107.9-296.54,38.91.09,77.81.18,116.72.28-13.89,50.37-42.69,107.4-66.55,155.76-8.95,20.03-21.89,47.96-18.52,70.81,1.37,16.86,10.33,22.12,25.42,28.47,58.88,15.08,105.62-9.58,171.58-56.43,32.36-66.05,69.23-132.09,87.99-198.14ZM2055.56,325.49c-13.64,95.54-90.7,175.57-100.08,306.09-39.5.13-79,.27-118.5.4,1.83-49.93,21.48-105.26,43.21-152.64,9.87-23.14,24.18-53.69,25.13-79.15.5-28.48-18.59-38.32-45.7-38.29-46.31-.09-75.28,18.84-111.98,47.28-37.48,74.45-74.18,148.91-77.48,223.36-39.84.14-79.68.27-119.51.41,5.7-128.91,111.39-257.83,148.25-386.74,39.75.09,79.5.19,119.25.28-5.08,17.78-11.48,35.56-18.74,53.34,36.6-24.22,61.55-42.74,103.3-52.48,59.06-9.84,165.81-8.36,152.85,78.12ZM2614.63,713.55c174.97.18,185.08,96.8,105.99,235.07-100.63.1-201.26.2-301.88.31-14.92,73.64,206.18,27,241.79,13.52,1.27,35.38,5.27,70.74,15.54,106.07-74.54,39.08-286.34,54.41-355.6.35-51.86-42.03-31.04-105.61-3.56-160.7,63.57-120.76,156.77-195.66,297.73-194.62ZM2568.74,834.62c-46.02-.14-95.97,11.27-119.01,50.61,60.62,0,121.24,0,181.86-.01,16.99-41.9-15.83-50.06-62.85-50.6ZM2326.82,243.29c93.02-2.34,214.33,34.77,159.5,145.62-43.45,7.68-86.94,15.38-130.42,23.1,12.23-67.21-110.77-54.77-146.27-33.1-23.92,13.73-41.48,34.6-52.99,58.96-28.91,54.87.36,78.59,57.67,77.36,43.81.32,90.72-13.33,116.2-49.05,36.01,7.01,72.12,14.01,108.33,20.99-55.21,133.9-209.3,165.79-339.94,136.19-98.16-23.82-105.76-104.75-63-184.77,63.8-120.73,149.21-196.24,290.92-195.31ZM2779.81,235.37c174.97.18,185.08,96.8,105.99,235.07-100.63.1-201.26.2-301.88.31-14.92,73.64,206.18,27,241.79,13.52,1.27,35.38,5.27,70.74,15.54,106.07-74.54,39.08-286.34,54.41-355.6.35-51.86-42.03-31.04-105.61-3.56-160.7,63.57-120.76,156.77-195.66,297.73-194.62ZM2733.93,356.44c-46.02-.14-95.97,11.27-119.01,50.61,60.62,0,121.24,0,181.86-.01,16.99-41.9-15.83-50.06-62.85-50.6ZM2269.4,1023.85c-14.22,21.01-75.88,115.1-90.98,137.95,40.57-12.22,134.31-43.94,175.91-52.63-43.26-13.61-76.99-41.67-84.94-85.33M2759.65,641.68c-45.32,6.97-97.16,10.21-146.67,8.82-11.91,13.12-22.26,27.97-33.83,42.42,36-3.13,81.51-1.08,112.61,6.74,21.34-22.81,43.94-41.77,67.89-57.97M3340.83,359.43l.04.03s-.03-.02-.04-.03M3193.79,230.91c-81.07.64-172.88,19.15-249.48,56.57,15.3,27.54,12.22,71.44.11,106.27,102.25-70.18,296.4-104.02,400.66-31.18-18.11,18.61-50.8,35.37-77.15,42.52h.03c-118.98,32.99-243.05,44.28-362.21,75.64-.17.32-.33.64-.5.96-4.41.99-8.84,1.95-13.23,3.05l.05.05c-2.27.51-4.57,1.04-6.82,1.58v-.06c-.09.02-.36.1-.44.13h0c-.45.11-1.09.34-1.54.48h.25c-2.93.86-5.86,1.72-8.77,2.61h0c-9.4,2.84-18.76,5.84-28.07,9.03,2,34.93,7.15,63.67,15.57,91.48,152.71-63.91,425.2-51.51,543.07-158.47,52.7-48.09,48.58-106.99-11.08-146.34-56.78-40.33-129.43-54.2-200.43-54.3M3387.08,1065.37h0M3382.23,1051.72h13.79-13.79M3382.69,1047.4h0M2837.5,721.51h0M2839.28,721.28h0M3313.99,0c-25.46,0-50.37.74-74.3,2h.07c-206.6,10.39-379.08,70.65-528.98,200.69l.17-.15c-11.55,9.92-23.47,19.65-35.58,29.54,46.74-14.39,109.47-17.71,159.48-10.17,138.29-96.68,300.71-130.77,479.14-130.49,131.62,3.94,289.87,10.87,361.94,129.69,59.37,120.08-45.97,215.84-148.63,277.62l.03-.02c-154.9,91.21-292.98,96.41-466.1,159.86-81.64,23.45-152.7,44.6-224.61,63.09h0c2.01,9.08,5.39,27.44,6.61,36.61,0,0,.27,2.49.27,2.49l.47,51.7c.21,0,.41,0,.6,0h0c217.61-3.4,435.2-6.74,652.76-10.01-28.9,57.59-57.32,115.46-83.93,173.65-48.75-19.19-92.25-23.53-152.33-28.95-177.19-11.59-364.3-.76-552.02,17.61v-.03c-5.27.46-9.89,1.02-15.3,1.55h0c-3.52.31-7.03.65-10.54,1.1l.09.44-.54.08c.03.46.13,1.4.21,1.85h-.41c1.66,33.45,5.87,61.69,13.09,87.91,211.57-19.31,415.24-36.03,615.14-13.32,28.55,4.89,53.88,7.75,76.27,21.03l9.1-9.61,4.9-2.39,68.2,22.14c51.65-120.27,116.97-246.24,177.9-366.74-154.79,2.32-311.08,4.67-465.75,7.04,210.42-55,495.09-121.86,588.7-344.76,23.62-63.26,18.16-131.18-12.99-191.91C3672.33,24.22,3473.4,1.68,3313.99,0" fill="currentColor"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Sub-header Section -->
                {{#if drop.sub_header}}
                <div class="drop-sub-header">
                    {{#if drop.sub_header_title}}
                    <div class="drop-sub-header-title">
                        {{drop.sub_header_title}}
                    </div>
                    {{/if}}
                    <div class="drop-sub-header-content">
                        {{drop.sub_header}}
                    </div>
                </div>
                {{/if}}
            </div>
        </div>
    </div>

    <!-- JavaScript for Form Handling -->
    <script>
        // Production-ready drop landing page

        document.addEventListener('DOMContentLoaded', function() {
            // Debug: Log drop configuration
            console.log('🔍 Drop Configuration:', {
                collect_phone: {{#if drop.collect_phone}}true{{else}}false{{/if}},
                collect_email: {{#if drop.collect_email}}true{{else}}false{{/if}},
                button_color: '{{drop.button_color}}',
                button_text: '{{drop.button_text}}'
            });

            const form = document.getElementById('drop-signup-form');
            const phoneInput = document.querySelector('input[name="phone"]');
            const emailInput = document.querySelector('input[name="email"]');
            const submitButton = form.querySelector('button[type="submit"]');
            const successMessage = document.getElementById('success-message');
            const errorMessage = document.getElementById('error-message');

            // Enhanced error display function
            function showError(title, message, type = 'validation') {
                const errorTitle = document.getElementById('error-title');
                const errorText = document.getElementById('error-text');

                if (errorTitle && errorText) {
                    errorTitle.textContent = title;
                    errorText.textContent = message;
                }

                // Hide success message if showing
                successMessage.classList.add('hidden');

                // Show error with animation
                errorMessage.classList.remove('hidden');

                // Auto-hide validation errors after 5 seconds
                if (type === 'validation') {
                    setTimeout(() => {
                        hideError();
                    }, 5000);
                }

                console.log(`❌ Error displayed: ${title} - ${message}`);
            }

            function hideError() {
                errorMessage.classList.add('hidden');
            }

            function showSuccess(message) {
                const successText = document.getElementById('success-text');
                if (successText) {
                    successText.textContent = message;
                }

                // Hide error message if showing
                errorMessage.classList.add('hidden');

                // Show success with animation
                successMessage.classList.remove('hidden');

                console.log(`✅ Success displayed: ${message}`);
            }

            // Enhanced Form submission handler for dynamic fields
            form.addEventListener('submit', async function(e) {
                e.preventDefault();

                const formData = new FormData(form);
                const phone = formData.get('phone');
                const email = formData.get('email');

                // Store original button text before any changes
                const originalText = submitButton.textContent;

                // Hide previous messages
                hideError();
                successMessage.classList.add('hidden');

                // PRIORITY 3: Enhanced international phone validation
                if (phone && phone.trim()) {
                    const cleanPhone = phone.replace(/[^\d]/g, '');
                    const countrySelect = document.getElementById('country-select');
                    const selectedCountryCode = countrySelect ? countrySelect.value : '+1';

                    console.log('📱 Client validating international phone:', {
                        original: phone,
                        cleaned: cleanPhone,
                        country: selectedCountryCode,
                        length: cleanPhone.length
                    });

                    if (cleanPhone.length === 0) {
                        showError(
                            'Invalid Phone Number',
                            'Phone number cannot be empty.',
                            'validation'
                        );
                        submitButton.disabled = false;
                        submitButton.textContent = originalText;
                        return;
                    }

                    // Use international validation
                    if (!isValidPhoneNumber(phone, selectedCountryCode)) {
                        const pattern = phonePatterns[selectedCountryCode];
                        const countryOption = document.querySelector(`option[value="${selectedCountryCode}"]`);
                        const countryName = countryOption && countryOption.dataset.name ? countryOption.dataset.name : selectedCountryCode;
                        const exampleFormat = pattern ? pattern.placeholder : 'valid format';

                        showError(
                            'Invalid Phone Number',
                            `Please enter a valid ${countryName} phone number (e.g., ${exampleFormat}).`,
                            'validation'
                        );
                        submitButton.disabled = false;
                        submitButton.textContent = originalText;
                        return;
                    }
                }

                // Validate email if provided
                if (email && email.trim()) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(email)) {
                        showError(
                            'Invalid Email Address',
                            'Please enter a valid email address (e.g., you@example.com).',
                            'validation'
                        );
                        submitButton.disabled = false;
                        submitButton.textContent = originalText;
                        return;
                    }
                }

                // Disable button and show loading state
                submitButton.disabled = true;
                submitButton.textContent = 'RSVP...';

                // PRIORITY 3: Prepare international phone data for server
                const dataToSend = {};
                if (phone && phone.trim()) {
                    const countrySelectElement = document.getElementById('country-select');
                    const selectedCountryCode = countrySelectElement ? countrySelectElement.value : '+1';
                    const cleanPhone = phone.replace(/[^\d]/g, '');

                    // Format as international phone number for server: +CCXXXXXXXXXX
                    dataToSend.phone = `${selectedCountryCode}${cleanPhone}`;
                    dataToSend.country_code = selectedCountryCode;

                    console.log('📱 International phone processing:', {
                        original: phone,
                        cleaned: cleanPhone,
                        countryCode: selectedCountryCode,
                        final: dataToSend.phone,
                        length: cleanPhone.length
                    });
                }
                if (email && email.trim()) dataToSend.email = email;

                console.log('📤 Submitting form data:', dataToSend);
                console.log('📍 Endpoint:', '/drop/signup/{{drop.slug}}');

                try {
                    const response = await fetch('/drop/signup/{{drop.slug}}', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(dataToSend)
                    });

                    console.log('📥 Response status:', response.status);
                    console.log('📥 Response headers:', Object.fromEntries(response.headers.entries()));

                    const result = await response.json();
                    console.log('📥 Response data:', result);

                    if (response.ok) {
                        showSuccess('Thank you! You\'re on the list.');
                        // Don't reset form to keep the data visible
                    } else {
                        console.error('❌ Server error:', result);

                        // Provide specific error messages based on response
                        let errorTitle = 'Submission Failed';
                        let errorMessage = 'Please try again.';

                        if (response.status === 400) {
                            // Parse the specific error message from server
                            const serverMessage = result.message || '';
                            console.log('📱 Server error message:', serverMessage);

                            // Check for specific error types
                            if (serverMessage.includes('Phone Number Error:')) {
                                errorTitle = 'Invalid Phone Number';
                                errorMessage = serverMessage.replace('Phone Number Error: ', '');
                            } else if (serverMessage.includes('Email Error:')) {
                                errorTitle = 'Invalid Email Address';
                                errorMessage = serverMessage.replace('Email Error: ', '');
                            } else if (serverMessage.includes('Name Error:')) {
                                errorTitle = 'Invalid Name';
                                errorMessage = serverMessage.replace('Name Error: ', '');
                            } else if (serverMessage.toLowerCase().includes('phone')) {
                                errorTitle = 'Invalid Phone Number';
                                errorMessage = serverMessage;
                            } else if (serverMessage.toLowerCase().includes('email')) {
                                errorTitle = 'Invalid Email Address';
                                errorMessage = serverMessage;
                            } else {
                                errorTitle = 'Invalid Information';
                                errorMessage = serverMessage || 'Please check your information and try again.';
                            }
                        } else if (response.status === 409) {
                            errorTitle = 'Already Registered';
                            errorMessage = 'You\'re already on the list! Check your email for confirmation.';
                        } else if (response.status === 429) {
                            errorTitle = 'Too Many Attempts';
                            errorMessage = 'Please wait a moment before trying again.';
                        } else if (response.status >= 500) {
                            errorTitle = 'Server Error';
                            errorMessage = 'Our servers are having issues. Please try again in a few minutes.';
                        } else {
                            errorMessage = result.message || `Error ${response.status}: Please try again.`;
                        }

                        showError(errorTitle, errorMessage, 'server');
                    }
                } catch (error) {
                    console.error('❌ Form submission error:', error);

                    let errorTitle = 'Connection Error';
                    let errorMessage = 'Please check your internet connection and try again.';

                    if (error.name === 'TypeError' && error.message.includes('fetch')) {
                        errorTitle = 'Network Error';
                        errorMessage = 'Unable to connect. Please check your internet connection.';
                    } else if (error.message.includes('timeout')) {
                        errorTitle = 'Request Timeout';
                        errorMessage = 'The request took too long. Please try again.';
                    } else if (error.message) {
                        errorMessage = error.message;
                    }

                    showError(errorTitle, errorMessage, 'network');
                } finally {
                    submitButton.disabled = false;
                    submitButton.textContent = originalText;
                }
            });

            // PRIORITY 3: Enhanced International Phone Input with Real-time Formatting and Auto-Detection
            if (phoneInput) {
                let currentCountryCode = '+1'; // Default to US

                // PRIORITY 3: Automatic Country Detection Function
                function detectCountryFromPhoneNumber(phoneNumber) {
                    // Remove all non-numeric characters
                    const cleanNumber = phoneNumber.replace(/[^\d]/g, '');

                    // Don't detect if number is too short
                    if (cleanNumber.length < 2) return null;

                    // Check for partial matches first (when user is still typing)
                    // This provides immediate feedback as user types
                    if (cleanNumber.length >= 2) {
                        const prefix2 = cleanNumber.substring(0, 2);
                        const prefix3 = cleanNumber.length >= 3 ? cleanNumber.substring(0, 3) : null;

                        // Check 3-digit prefixes first (more specific)
                        if (prefix3) {
                            const prefix3Map = {
                                '441': '+44', // UK mobile
                                '442': '+44', // UK landline
                                '443': '+44', // UK
                                '447': '+44', // UK mobile
                                '448': '+44', // UK
                                '449': '+44', // UK
                            };

                            if (prefix3Map[prefix3]) {
                                return prefix3Map[prefix3];
                            }
                        }

                        // Check 2-digit prefixes
                        const prefix2Map = {
                            '44': '+44', // UK
                            '49': '+49', // Germany
                            '33': '+33', // France
                            '34': '+34', // Spain
                            '39': '+39', // Italy
                            '61': '+61', // Australia
                            '81': '+81', // Japan
                            '82': '+82', // South Korea
                            '55': '+55', // Brazil
                            '52': '+52', // Mexico
                            '91': '+91', // India
                            '86': '+86'  // China
                        };

                        if (prefix2Map[prefix2]) {
                            return prefix2Map[prefix2];
                        }

                        // Check single digit for US/Canada
                        if (cleanNumber.charAt(0) === '1' && cleanNumber.length >= 4) {
                            return '+1';
                        }
                    }

                    // For complete numbers, validate against full patterns
                    if (cleanNumber.length >= 10) {
                        const countryCodePatterns = {
                            '+1': /^1\d{10}$/, // US/Canada: 1 + 10 digits
                            '+44': /^44\d{10,11}$/, // UK: 44 + 10-11 digits
                            '+49': /^49\d{10,12}$/, // Germany: 49 + 10-12 digits
                            '+33': /^33\d{9,10}$/, // France: 33 + 9-10 digits
                            '+34': /^34\d{9}$/, // Spain: 34 + 9 digits
                            '+39': /^39\d{9,11}$/, // Italy: 39 + 9-11 digits
                            '+61': /^61\d{9}$/, // Australia: 61 + 9 digits
                            '+81': /^81\d{10,11}$/, // Japan: 81 + 10-11 digits
                            '+82': /^82\d{9,11}$/, // South Korea: 82 + 9-11 digits
                            '+55': /^55\d{10,11}$/, // Brazil: 55 + 10-11 digits
                            '+52': /^52\d{10}$/, // Mexico: 52 + 10 digits
                            '+91': /^91\d{10}$/, // India: 91 + 10 digits
                            '+86': /^86\d{11}$/ // China: 86 + 11 digits
                        };

                        // Check each pattern for complete validation
                        for (const [countryCode, pattern] of Object.entries(countryCodePatterns)) {
                            if (pattern.test(cleanNumber)) {
                                return countryCode;
                            }
                        }
                    }

                    return null;
                }

                // Function to update country selection
                function updateCountrySelection(newCountryCode) {
                    const countrySelect = document.getElementById('country-select');
                    if (countrySelect && newCountryCode && newCountryCode !== currentCountryCode) {
                        // Find the option with the matching country code
                        const option = countrySelect.querySelector(`option[value="${newCountryCode}"]`);
                        if (option) {
                            console.log(`🌍 Auto-detecting country: ${currentCountryCode} → ${newCountryCode} (${option.dataset.name})`);
                            countrySelect.value = newCountryCode;
                            countrySelect.dispatchEvent(new Event('change'));
                            return true;
                        } else {
                            console.log(`⚠️ Country code ${newCountryCode} not found in dropdown options`);
                        }
                    }
                    return false;
                }

                // International phone number formatting function
                function formatPhoneNumber(value, countryCode = currentCountryCode) {
                    // Remove all non-numeric characters
                    const phoneNumber = value.replace(/[^\d]/g, '');

                    // Don't format if empty
                    if (phoneNumber.length === 0) return '';

                    // Get pattern for current country
                    const pattern = phonePatterns[countryCode];
                    if (!pattern) {
                        // Fallback to basic formatting for unknown countries
                        return phoneNumber;
                    }

                    // Apply country-specific formatting
                    try {
                        return pattern.format(phoneNumber);
                    } catch (error) {
                        console.warn('Phone formatting error:', error);
                        return phoneNumber; // Return unformatted if error
                    }
                }

                // International phone number validation
                function isValidPhoneNumber(value, countryCode = currentCountryCode) {
                    const phoneNumber = value.replace(/[^\d]/g, '');

                    // Get pattern for current country
                    const pattern = phonePatterns[countryCode];
                    if (!pattern) {
                        // Fallback validation for unknown countries (10-15 digits)
                        return phoneNumber.length >= 10 && phoneNumber.length <= 15;
                    }

                    return pattern.pattern.test(phoneNumber);
                }

                // Add visual feedback for validation
                function updateValidationState(isValid) {
                    const container = phoneInput.closest('.phone-input-container');
                    if (isValid) {
                        container.style.borderColor = '#10B981';
                        container.style.boxShadow = '0 0 0 1px #10B981';
                    } else if (phoneInput.value.length > 0) {
                        container.style.borderColor = '#EF4444';
                        container.style.boxShadow = '0 0 0 1px #EF4444';
                    } else {
                        container.style.borderColor = '';
                        container.style.boxShadow = '';
                    }
                }

                // Real-time international formatting on input with auto-detection
                phoneInput.addEventListener('input', function(e) {
                    const cursorPosition = e.target.selectionStart;
                    const oldValue = e.target.value;

                    // PRIORITY 3: Auto-detect country from phone number
                    const detectedCountry = detectCountryFromPhoneNumber(e.target.value);
                    console.log(`📱 Phone input: "${e.target.value}" → detected: ${detectedCountry}, current: ${currentCountryCode}`);

                    if (detectedCountry && detectedCountry !== currentCountryCode) {
                        // Only auto-update if the user hasn't manually selected a different country recently
                        const timeSinceLastManualChange = Date.now() - (window.lastManualCountryChange || 0);
                        console.log(`⏱️ Time since last manual change: ${timeSinceLastManualChange}ms`);

                        if (timeSinceLastManualChange > 2000) { // 2 second delay to avoid conflicts
                            console.log(`🔄 Auto-updating country selection...`);
                            updateCountrySelection(detectedCountry);
                        } else {
                            console.log(`⏸️ Skipping auto-detection (recent manual change)`);
                        }
                    }

                    const newValue = formatPhoneNumber(e.target.value, currentCountryCode);
                    e.target.value = newValue;

                    // Maintain cursor position (improved for international formats)
                    const newCursorPosition = Math.min(
                        cursorPosition + (newValue.length - oldValue.length),
                        newValue.length
                    );
                    e.target.setSelectionRange(newCursorPosition, newCursorPosition);

                    // Update validation state with current country
                    updateValidationState(isValidPhoneNumber(newValue, currentCountryCode));

                    // Hide error message when user starts typing valid input
                    if (newValue.length > 0 && isValidPhoneNumber(newValue, currentCountryCode)) {
                        hideError();
                    }
                });

                // Focus styling
                phoneInput.addEventListener('focus', function(e) {
                    e.target.closest('.phone-input-container').style.backgroundColor = 'var(--laylo-input-focus)';
                });

                // Blur styling and validation with international support
                phoneInput.addEventListener('blur', function(e) {
                    e.target.closest('.phone-input-container').style.backgroundColor = 'var(--laylo-input-bg)';
                    updateValidationState(isValidPhoneNumber(e.target.value, currentCountryCode));
                });

                // Prevent invalid characters
                phoneInput.addEventListener('keydown', function(e) {
                    // Allow: backspace, delete, tab, escape, enter
                    if ([8, 9, 27, 13, 46].indexOf(e.keyCode) !== -1 ||
                        // Allow: Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X
                        (e.keyCode === 65 && e.ctrlKey === true) ||
                        (e.keyCode === 67 && e.ctrlKey === true) ||
                        (e.keyCode === 86 && e.ctrlKey === true) ||
                        (e.keyCode === 88 && e.ctrlKey === true)) {
                        return;
                    }
                    // Ensure that it is a number and stop the keypress
                    if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                        e.preventDefault();
                    }
                });

                // Enhanced form validation for international numbers
                const form = phoneInput.closest('form');
                if (form) {
                    form.addEventListener('submit', function(e) {
                        if (phoneInput.value && !isValidPhoneNumber(phoneInput.value, currentCountryCode)) {
                            e.preventDefault();
                            updateValidationState(false);
                            phoneInput.focus();

                            // Show country-specific error message
                            const pattern = phonePatterns[currentCountryCode];
                            const countryName = document.querySelector(`option[value="${currentCountryCode}"]`)?.dataset.name || currentCountryCode;
                            const exampleFormat = pattern ? pattern.placeholder : 'valid format';

                            showError(
                                'Invalid Phone Number',
                                `Please enter a valid ${countryName} phone number (e.g., ${exampleFormat}).`,
                                'validation'
                            );
                            return false;
                        }
                    });
                }
            }

            // Email Input Validation
            if (emailInput) {
                // Email validation function
                function isValidEmail(email) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    return emailRegex.test(email);
                }

                // Add visual feedback for email validation
                function updateEmailValidationState(isValid) {
                    const container = emailInput.closest('.email-input-container');
                    if (isValid) {
                        container.style.borderColor = '#10B981';
                        container.style.boxShadow = '0 0 0 1px #10B981';
                        container.classList.add('valid');
                        container.classList.remove('invalid');
                    } else if (emailInput.value.length > 0) {
                        container.style.borderColor = '#EF4444';
                        container.style.boxShadow = '0 0 0 1px #EF4444';
                        container.classList.add('invalid');
                        container.classList.remove('valid');
                    } else {
                        container.style.borderColor = '';
                        container.style.boxShadow = '';
                        container.classList.remove('valid', 'invalid');
                    }
                }

                // Real-time email validation
                emailInput.addEventListener('input', function(e) {
                    updateEmailValidationState(isValidEmail(e.target.value));

                    // Hide error message when user starts typing valid input
                    if (e.target.value.length > 0 && isValidEmail(e.target.value)) {
                        hideError();
                    }
                });

                // Focus styling
                emailInput.addEventListener('focus', function(e) {
                    e.target.closest('.email-input-container').style.backgroundColor = 'var(--laylo-input-focus)';
                });

                // Blur styling and validation
                emailInput.addEventListener('blur', function(e) {
                    e.target.closest('.email-input-container').style.backgroundColor = 'var(--laylo-input-bg)';
                    updateEmailValidationState(isValidEmail(e.target.value));
                });

                // Form validation enhancement for email
                form.addEventListener('submit', function(e) {
                    if (emailInput.hasAttribute('required') && !isValidEmail(emailInput.value)) {
                        e.preventDefault();
                        updateEmailValidationState(false);
                        emailInput.focus();

                        // Show enhanced error message
                        showError(
                            'Invalid Email Address',
                            'Please enter a valid email address (e.g., you@example.com).',
                            'validation'
                        );
                        return false;
                    }
                });
            }

            // Native Country Selector
            const countrySelect = document.getElementById('country-select');
            const countryFlagDisplay = document.getElementById('country-flag-display');

            // PRIORITY 2: Comprehensive Country Flag Support
            const countryFlags = {
                // North America
                '+1': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjQjIyMjM0Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCAwSDIxVjFIMFYwWk0wIDJIMjFWM0gwVjJaTTAgNEgyMVY1SDBWNFpNMCA2SDIxVjdIMFY2Wk0wIDhIMjFWOUgwVjhaTTAgMTBIMjFWMTFIMFYxMFpNMCAxMkgyMVYxM0gwVjEyWiIgZmlsbD0id2hpdGUiLz4KPHJlY3Qgd2lkdGg9IjkiIGhlaWdodD0iOCIgZmlsbD0iIzNDM0I2RSIvPgo8L3N2Zz4K', // US/Canada

                // Europe
                '+44': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjMDEyMTY5Ii8+CjxwYXRoIGQ9Ik0wIDBoMjF2MTVIMHoiIGZpbGw9IiMwMTIxNjkiLz4KPHBhdGggZD0iTTAgMGgyMXYxNUgweiIgZmlsbD0iIzAxMjE2OSIvPgo8L3N2Zz4K', // UK
                '+49': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjMDAwMDAwIi8+CjxyZWN0IHk9IjUiIHdpZHRoPSIyMSIgaGVpZ2h0PSI1IiBmaWxsPSIjREQwMDAwIi8+CjxyZWN0IHk9IjEwIiB3aWR0aD0iMjEiIGhlaWdodD0iNSIgZmlsbD0iI0ZGQ0UwMCIvPgo8L3N2Zz4K', // Germany
                '+33': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMTUiIGZpbGw9IiMwMDIzOTUiLz4KPHJlY3QgeD0iNyIgd2lkdGg9IjciIGhlaWdodD0iMTUiIGZpbGw9IiNGRkZGRkYiLz4KPHJlY3QgeD0iMTQiIHdpZHRoPSI3IiBoZWlnaHQ9IjE1IiBmaWxsPSIjRUQyOTM5Ii8+Cjwvc3ZnPgo=', // France
                '+34': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjQUEwMDAwIi8+CjxyZWN0IHk9IjMiIHdpZHRoPSIyMSIgaGVpZ2h0PSI5IiBmaWxsPSIjRkZBQTAwIi8+Cjwvc3ZnPgo=', // Spain
                '+39': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMTUiIGZpbGw9IiMwMDk5NDYiLz4KPHJlY3QgeD0iNyIgd2lkdGg9IjciIGhlaWdodD0iMTUiIGZpbGw9IiNGRkZGRkYiLz4KPHJlY3QgeD0iMTQiIHdpZHRoPSI3IiBoZWlnaHQ9IjE1IiBmaWxsPSIjQ0UyQjM3Ii8+Cjwvc3ZnPgo=', // Italy

                // Asia-Pacific
                '+61': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjMDEyMTY5Ii8+Cjwvc3ZnPgo=', // Australia
                '+81': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjRkZGRkZGIi8+CjxjaXJjbGUgY3g9IjEwLjUiIGN5PSI3LjUiIHI9IjMiIGZpbGw9IiNCQzAwMkQiLz4KPC9zdmc+Cg==', // Japan
                '+82': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjRkZGRkZGIi8+CjxjaXJjbGUgY3g9IjEwLjUiIGN5PSI3LjUiIHI9IjMiIGZpbGw9IiNDNjBDMzAiLz4KPC9zdmc+Cg==', // South Korea
                '+91': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjUiIGZpbGw9IiNGRjk5MzMiLz4KPHJlY3QgeT0iNSIgd2lkdGg9IjIxIiBoZWlnaHQ9IjUiIGZpbGw9IiNGRkZGRkYiLz4KPHJlY3QgeT0iMTAiIHdpZHRoPSIyMSIgaGVpZ2h0PSI1IiBmaWxsPSIjMTM4ODA4Ii8+Cjwvc3ZnPgo=', // India
                '+86': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjREUyOTEwIi8+CjxjaXJjbGUgY3g9IjYiIGN5PSI0IiByPSIxIiBmaWxsPSIjRkZERTAwIi8+Cjwvc3ZnPgo=', // China

                // Americas
                '+55': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjMDA5NzM5Ii8+CjxjaXJjbGUgY3g9IjEwLjUiIGN5PSI3LjUiIHI9IjMiIGZpbGw9IiNGRkRGMDAiLz4KPC9zdmc+Cg==', // Brazil
                '+52': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMTUiIGZpbGw9IiMwMDY4NDciLz4KPHJlY3QgeD0iNyIgd2lkdGg9IjciIGhlaWdodD0iMTUiIGZpbGw9IiNGRkZGRkYiLz4KPHJlY3QgeD0iMTQiIHdpZHRoPSI3IiBoZWlnaHQ9IjE1IiBmaWxsPSIjQ0UxMTI2Ii8+Cjwvc3ZnPgo=' // Mexico
            };

            // PRIORITY 3: International Phone Number Patterns and Validation
            const phonePatterns = {
                '+1': { // US/Canada
                    pattern: /^\d{10}$/,
                    format: (num) => `(${num.slice(0,3)}) ${num.slice(3,6)}-${num.slice(6)}`,
                    placeholder: '(555) 123-4567',
                    maxLength: 14
                },
                '+44': { // UK
                    pattern: /^\d{10,11}$/,
                    format: (num) => num.length === 10 ? `${num.slice(0,2)} ${num.slice(2,6)} ${num.slice(6)}` : `${num.slice(0,3)} ${num.slice(3,7)} ${num.slice(7)}`,
                    placeholder: '20 1234 5678',
                    maxLength: 13
                },
                '+49': { // Germany
                    pattern: /^\d{10,12}$/,
                    format: (num) => `${num.slice(0,2)} ${num.slice(2,5)} ${num.slice(5)}`,
                    placeholder: '30 123 45678',
                    maxLength: 15
                },
                '+33': { // France
                    pattern: /^\d{9,10}$/,
                    format: (num) => `${num.slice(0,1)} ${num.slice(1,3)} ${num.slice(3,5)} ${num.slice(5,7)} ${num.slice(7)}`,
                    placeholder: '1 23 45 67 89',
                    maxLength: 14
                },
                '+34': { // Spain
                    pattern: /^\d{9}$/,
                    format: (num) => `${num.slice(0,3)} ${num.slice(3,6)} ${num.slice(6)}`,
                    placeholder: '612 345 678',
                    maxLength: 11
                },
                '+39': { // Italy
                    pattern: /^\d{9,11}$/,
                    format: (num) => `${num.slice(0,3)} ${num.slice(3,6)} ${num.slice(6)}`,
                    placeholder: '312 345 6789',
                    maxLength: 13
                },
                '+61': { // Australia
                    pattern: /^\d{9}$/,
                    format: (num) => `${num.slice(0,1)} ${num.slice(1,5)} ${num.slice(5)}`,
                    placeholder: '4 1234 5678',
                    maxLength: 12
                },
                '+81': { // Japan
                    pattern: /^\d{10,11}$/,
                    format: (num) => num.length === 10 ? `${num.slice(0,2)}-${num.slice(2,6)}-${num.slice(6)}` : `${num.slice(0,3)}-${num.slice(3,7)}-${num.slice(7)}`,
                    placeholder: '90-1234-5678',
                    maxLength: 13
                },
                '+82': { // South Korea
                    pattern: /^\d{9,11}$/,
                    format: (num) => `${num.slice(0,2)}-${num.slice(2,6)}-${num.slice(6)}`,
                    placeholder: '10-1234-5678',
                    maxLength: 13
                },
                '+55': { // Brazil
                    pattern: /^\d{10,11}$/,
                    format: (num) => num.length === 10 ? `(${num.slice(0,2)}) ${num.slice(2,6)}-${num.slice(6)}` : `(${num.slice(0,2)}) ${num.slice(2,7)}-${num.slice(7)}`,
                    placeholder: '(11) 91234-5678',
                    maxLength: 15
                },
                '+52': { // Mexico
                    pattern: /^\d{10}$/,
                    format: (num) => `${num.slice(0,3)} ${num.slice(3,6)} ${num.slice(6)}`,
                    placeholder: '555 123 4567',
                    maxLength: 12
                },
                '+91': { // India
                    pattern: /^\d{10}$/,
                    format: (num) => `${num.slice(0,5)} ${num.slice(5)}`,
                    placeholder: '98765 43210',
                    maxLength: 11
                },
                '+86': { // China
                    pattern: /^\d{11}$/,
                    format: (num) => `${num.slice(0,3)} ${num.slice(3,7)} ${num.slice(7)}`,
                    placeholder: '138 0013 8000',
                    maxLength: 13
                }
            };

            // PRIORITY 4: Enhanced Country Selector with Search and UX Improvements
            if (countrySelect && countryFlagDisplay) {
                // Track manual country changes to prevent auto-detection conflicts
                window.lastManualCountryChange = 0;

                // Update flag when country changes
                countrySelect.addEventListener('change', function(e) {
                    const selectedCode = e.target.value;
                    const flagImg = countryFlagDisplay.querySelector('img');
                    const selectedOption = e.target.selectedOptions[0];

                    // Update flag image
                    if (countryFlags[selectedCode]) {
                        flagImg.src = countryFlags[selectedCode];
                        flagImg.alt = selectedOption.dataset.name || selectedCode;
                    } else {
                        // Fallback for countries without flags
                        flagImg.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAyMSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE1IiBmaWxsPSIjQ0NDQ0NDIi8+Cjwvc3ZnPgo=';
                        flagImg.alt = selectedCode;
                    }

                    // Update current country code
                    currentCountryCode = selectedCode;

                    // Update phone input placeholder and maxlength based on country
                    if (phoneInput && phonePatterns[selectedCode]) {
                        const pattern = phonePatterns[selectedCode];
                        phoneInput.placeholder = pattern.placeholder;
                        phoneInput.maxLength = pattern.maxLength;

                        // Clear and reformat existing phone number for new country
                        if (phoneInput.value) {
                            const cleanNumber = phoneInput.value.replace(/[^\d]/g, '');
                            phoneInput.value = formatPhoneNumber(cleanNumber, selectedCode);
                            updateValidationState(isValidPhoneNumber(phoneInput.value, selectedCode));
                        }
                    }

                    // Focus phone input after country selection for better UX
                    if (phoneInput) {
                        phoneInput.focus();
                    }

                    console.log(`🌍 Country changed to: ${selectedCode} (${selectedOption.dataset.name})`);
                });

                // Track manual changes to prevent auto-detection conflicts
                countrySelect.addEventListener('mousedown', function() {
                    window.lastManualCountryChange = Date.now();
                    console.log(`🖱️ Manual mouse selection`);
                });

                // PRIORITY 4: Enhanced keyboard navigation support for accessibility
                countrySelect.addEventListener('keydown', function(e) {
                    // Track manual keyboard navigation
                    if (['ArrowUp', 'ArrowDown', 'Enter', 'Space'].includes(e.key)) {
                        window.lastManualCountryChange = Date.now();
                        console.log(`⌨️ Manual keyboard navigation: ${e.key}`);
                    }

                    // Allow typing to search countries (enhanced implementation)
                    if (e.key.length === 1 && e.key.match(/[a-zA-Z]/)) {
                        const searchChar = e.key.toLowerCase();
                        const options = Array.from(this.options);
                        const currentIndex = this.selectedIndex;

                        console.log(`🔍 Searching countries starting with: ${searchChar}`);

                        // Find next option starting with the typed character
                        let found = false;
                        for (let i = currentIndex + 1; i < options.length; i++) {
                            const countryName = options[i].dataset.name || '';
                            const optionText = options[i].textContent || '';
                            if (countryName.toLowerCase().startsWith(searchChar) ||
                                optionText.toLowerCase().includes(searchChar)) {
                                this.selectedIndex = i;
                                this.dispatchEvent(new Event('change'));
                                console.log(`✅ Found country: ${countryName}`);
                                e.preventDefault();
                                found = true;
                                break;
                            }
                        }

                        // If not found after current, search from beginning
                        if (!found) {
                            for (let i = 0; i < currentIndex; i++) {
                                const countryName = options[i].dataset.name || '';
                                const optionText = options[i].textContent || '';
                                if (countryName.toLowerCase().startsWith(searchChar) ||
                                    optionText.toLowerCase().includes(searchChar)) {
                                    this.selectedIndex = i;
                                    this.dispatchEvent(new Event('change'));
                                    console.log(`✅ Found country: ${countryName}`);
                                    e.preventDefault();
                                    break;
                                }
                            }
                        }
                    }
                });

                // Initialize with default country
                countrySelect.dispatchEvent(new Event('change'));
            }

            // B2B branding link
            const b2bLink = document.querySelector('.b2b-branding-link');
            if (b2bLink) {
                b2bLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.open('https://bounce2bounce.com', '_blank');
                });
            }

            // PostMessage listener for real-time gradient updates from edit page
            window.addEventListener('message', function(event) {
                if (event.data && event.data.type === 'UPDATE_GRADIENT') {
                    console.log('🎨 Received gradient update from edit page:', event.data);

                    const dropPageContainer = document.querySelector('.drop-page-container');
                    if (dropPageContainer && event.data.gradientCSS) {
                        dropPageContainer.style.background = event.data.gradientCSS;
                        console.log('🎨 Applied gradient to landing page:', event.data.gradientCSS);

                        // Send confirmation back to edit page
                        if (event.source) {
                            event.source.postMessage({
                                type: 'GRADIENT_UPDATE_CONFIRMED',
                                timestamp: event.data.timestamp,
                                success: true
                            }, '*');
                        }
                    } else {
                        console.warn('🎨 Could not apply gradient - container not found or no CSS provided');

                        // Send failure confirmation back to edit page
                        if (event.source) {
                            event.source.postMessage({
                                type: 'GRADIENT_UPDATE_CONFIRMED',
                                timestamp: event.data.timestamp,
                                success: false,
                                error: 'Container not found'
                            }, '*');
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
